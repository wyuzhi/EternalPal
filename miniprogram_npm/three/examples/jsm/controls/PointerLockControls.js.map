{"version":3,"file":"node_modules/three/examples/jsm/controls/PointerLockControls.js","names":["Controls","Euler","Vector3","_euler","_vector","_changeEvent","type","_lockEvent","_unlockEvent","_MOUSE_SENSITIVITY","_PI_2","Math","PI","PointerLockControls","constructor","camera","domElement","super","this","isLocked","minPolarAngle","maxPolarAngle","pointerSpeed","_onMouseMove","onMouseMove","bind","_onPointerlockChange","onPointerlockChange","_onPointerlockError","onPointerlockError","connect","element","ownerDocument","addEventListener","disconnect","removeEventListener","dispose","getObject","console","warn","object","getDirection","v","set","applyQuaternion","quaternion","moveForward","distance","enabled","setFromMatrixColumn","matrix","crossVectors","up","position","addScaledVector","moveRight","lock","unadjustedMovement","requestPointerLock","unlock","exitPointerLock","event","setFromQuaternion","y","movementX","x","movementY","max","min","setFromEuler","dispatchEvent","pointerLockElement","error"],"sources":["node_modules/three/examples/jsm/controls/PointerLockControls.js"],"sourcesContent":["import {\n\tControls,\n\tEuler,\n\tVector3\n} from 'three';\n\nconst _euler = new Euler( 0, 0, 0, 'YXZ' );\nconst _vector = new Vector3();\n\n/**\n * Fires when the user moves the mouse.\n *\n * @event PointerLockControls#change\n * @type {Object}\n */\nconst _changeEvent = { type: 'change' };\n\n/**\n * Fires when the pointer lock status is \"locked\" (in other words: the mouse is captured).\n *\n * @event PointerLockControls#lock\n * @type {Object}\n */\nconst _lockEvent = { type: 'lock' };\n\n/**\n * Fires when the pointer lock status is \"unlocked\" (in other words: the mouse is not captured anymore).\n *\n * @event PointerLockControls#unlock\n * @type {Object}\n */\nconst _unlockEvent = { type: 'unlock' };\n\nconst _MOUSE_SENSITIVITY = 0.002;\nconst _PI_2 = Math.PI / 2;\n\n/**\n * The implementation of this class is based on the [Pointer Lock API]{@link https://developer.mozilla.org/en-US/docs/Web/API/Pointer_Lock_API}.\n * `PointerLockControls` is a perfect choice for first person 3D games.\n *\n * ```js\n * const controls = new PointerLockControls( camera, document.body );\n *\n * // add event listener to show/hide a UI (e.g. the game's menu)\n * controls.addEventListener( 'lock', function () {\n *\n * \tmenu.style.display = 'none';\n *\n * } );\n *\n * controls.addEventListener( 'unlock', function () {\n *\n * \tmenu.style.display = 'block';\n *\n * } );\n * ```\n *\n * @augments Controls\n * @three_import import { PointerLockControls } from 'three/addons/controls/PointerLockControls.js';\n */\nclass PointerLockControls extends Controls {\n\n\t/**\n\t * Constructs a new controls instance.\n\t *\n\t * @param {Camera} camera - The camera that is managed by the controls.\n\t * @param {?HTMLDOMElement} domElement - The HTML element used for event listeners.\n\t */\n\tconstructor( camera, domElement = null ) {\n\n\t\tsuper( camera, domElement );\n\n\t\t/**\n\t\t * Whether the controls are locked or not.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @readonly\n\t\t * @default false\n\t\t */\n\t\tthis.isLocked = false;\n\n\t\t/**\n\t\t * Camera pitch, lower limit. Range is '[0, Math.PI]' in radians.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minPolarAngle = 0;\n\n\t\t/**\n\t\t * Camera pitch, upper limit. Range is '[0, Math.PI]' in radians.\n\t\t *\n\t\t * @type {number}\n\t\t * @default Math.PI\n\t\t */\n\t\tthis.maxPolarAngle = Math.PI;\n\n\t\t/**\n\t\t * Multiplier for how much the pointer movement influences the camera rotation.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.pointerSpeed = 1.0;\n\n\t\t// event listeners\n\n\t\tthis._onMouseMove = onMouseMove.bind( this );\n\t\tthis._onPointerlockChange = onPointerlockChange.bind( this );\n\t\tthis._onPointerlockError = onPointerlockError.bind( this );\n\n\t\tif ( this.domElement !== null ) {\n\n\t\t\tthis.connect( this.domElement );\n\n\t\t}\n\n\t}\n\n\tconnect( element ) {\n\n\t\tsuper.connect( element );\n\n\t\tthis.domElement.ownerDocument.addEventListener( 'mousemove', this._onMouseMove );\n\t\tthis.domElement.ownerDocument.addEventListener( 'pointerlockchange', this._onPointerlockChange );\n\t\tthis.domElement.ownerDocument.addEventListener( 'pointerlockerror', this._onPointerlockError );\n\n\t}\n\n\tdisconnect() {\n\n\t\tthis.domElement.ownerDocument.removeEventListener( 'mousemove', this._onMouseMove );\n\t\tthis.domElement.ownerDocument.removeEventListener( 'pointerlockchange', this._onPointerlockChange );\n\t\tthis.domElement.ownerDocument.removeEventListener( 'pointerlockerror', this._onPointerlockError );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.disconnect();\n\n\t}\n\n\tgetObject() {\n\n\t\tconsole.warn( 'THREE.PointerLockControls: getObject() has been deprecated. Use controls.object instead.' ); // @deprecated r169\n\n\t\treturn this.object;\n\n\t}\n\n\t/**\n\t * Returns the look direction of the camera.\n\t *\n\t * @param {Vector3} v - The target vector that is used to store the method's result.\n\t * @return {Vector3} The normalized direction vector.\n\t */\n\tgetDirection( v ) {\n\n\t\treturn v.set( 0, 0, - 1 ).applyQuaternion( this.object.quaternion );\n\n\t}\n\n\t/**\n\t * Moves the camera forward parallel to the xz-plane. Assumes camera.up is y-up.\n\t *\n\t * @param {number} distance - The signed distance.\n\t */\n\tmoveForward( distance ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// move forward parallel to the xz-plane\n\t\t// assumes camera.up is y-up\n\n\t\tconst camera = this.object;\n\n\t\t_vector.setFromMatrixColumn( camera.matrix, 0 );\n\n\t\t_vector.crossVectors( camera.up, _vector );\n\n\t\tcamera.position.addScaledVector( _vector, distance );\n\n\t}\n\n\t/**\n\t * Moves the camera sidewards parallel to the xz-plane.\n\t *\n\t * @param {number} distance - The signed distance.\n\t */\n\tmoveRight( distance ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\tconst camera = this.object;\n\n\t\t_vector.setFromMatrixColumn( camera.matrix, 0 );\n\n\t\tcamera.position.addScaledVector( _vector, distance );\n\n\t}\n\n\t/**\n\t * Activates the pointer lock.\n\t *\n\t * @param {boolean} [unadjustedMovement=false] - Disables OS-level adjustment for mouse acceleration, and accesses raw mouse input instead.\n\t * Setting it to true will disable mouse acceleration.\n\t */\n\tlock( unadjustedMovement = false ) {\n\n\t\tthis.domElement.requestPointerLock( {\n\t\t\tunadjustedMovement\n\t\t} );\n\n\t}\n\n\t/**\n\t * Exits the pointer lock.\n\t */\n\tunlock() {\n\n\t\tthis.domElement.ownerDocument.exitPointerLock();\n\n\t}\n\n}\n\n// event listeners\n\nfunction onMouseMove( event ) {\n\n\tif ( this.enabled === false || this.isLocked === false ) return;\n\n\tconst camera = this.object;\n\t_euler.setFromQuaternion( camera.quaternion );\n\n\t_euler.y -= event.movementX * _MOUSE_SENSITIVITY * this.pointerSpeed;\n\t_euler.x -= event.movementY * _MOUSE_SENSITIVITY * this.pointerSpeed;\n\n\t_euler.x = Math.max( _PI_2 - this.maxPolarAngle, Math.min( _PI_2 - this.minPolarAngle, _euler.x ) );\n\n\tcamera.quaternion.setFromEuler( _euler );\n\n\tthis.dispatchEvent( _changeEvent );\n\n}\n\nfunction onPointerlockChange() {\n\n\tif ( this.domElement.ownerDocument.pointerLockElement === this.domElement ) {\n\n\t\tthis.dispatchEvent( _lockEvent );\n\n\t\tthis.isLocked = true;\n\n\t} else {\n\n\t\tthis.dispatchEvent( _unlockEvent );\n\n\t\tthis.isLocked = false;\n\n\t}\n\n}\n\nfunction onPointerlockError() {\n\n\tconsole.error( 'THREE.PointerLockControls: Unable to use Pointer Lock API' );\n\n}\n\nexport { PointerLockControls };\n"],"mappings":"OACCA,SACAC,MACAC,YACM,QAEP,MAAMC,OAAS,IAAIF,MAAO,EAAG,EAAG,EAAG,OAC7BG,QAAU,IAAIF,QAQdG,aAAe,CAAEC,KAAM,UAQvBC,WAAa,CAAED,KAAM,QAQrBE,aAAe,CAAEF,KAAM,UAEvBG,mBAAqB,KACrBC,MAAQC,KAAKC,GAAK,EA0BxB,MAAMC,4BAA4Bb,SAQjC,WAAAc,CAAaC,EAAQC,EAAa,MAEjCC,MAAOF,EAAQC,GASfE,KAAKC,UAAW,EAQhBD,KAAKE,cAAgB,EAQrBF,KAAKG,cAAgBV,KAAKC,GAQ1BM,KAAKI,aAAe,EAIpBJ,KAAKK,aAAeC,YAAYC,KAAMP,MACtCA,KAAKQ,qBAAuBC,oBAAoBF,KAAMP,MACtDA,KAAKU,oBAAsBC,mBAAmBJ,KAAMP,MAE3B,OAApBA,KAAKF,YAETE,KAAKY,QAASZ,KAAKF,WAIrB,CAEA,OAAAc,CAASC,GAERd,MAAMa,QAASC,GAEfb,KAAKF,WAAWgB,cAAcC,iBAAkB,YAAaf,KAAKK,cAClEL,KAAKF,WAAWgB,cAAcC,iBAAkB,oBAAqBf,KAAKQ,sBAC1ER,KAAKF,WAAWgB,cAAcC,iBAAkB,mBAAoBf,KAAKU,oBAE1E,CAEA,UAAAM,GAEChB,KAAKF,WAAWgB,cAAcG,oBAAqB,YAAajB,KAAKK,cACrEL,KAAKF,WAAWgB,cAAcG,oBAAqB,oBAAqBjB,KAAKQ,sBAC7ER,KAAKF,WAAWgB,cAAcG,oBAAqB,mBAAoBjB,KAAKU,oBAE7E,CAEA,OAAAQ,GAEClB,KAAKgB,YAEN,CAEA,SAAAG,GAIC,OAFAC,QAAQC,KAAM,4FAEPrB,KAAKsB,MAEb,CAQA,YAAAC,CAAcC,GAEb,OAAOA,EAAEC,IAAK,EAAG,GAAK,GAAIC,gBAAiB1B,KAAKsB,OAAOK,WAExD,CAOA,WAAAC,CAAaC,GAEZ,IAAsB,IAAjB7B,KAAK8B,QAAoB,OAK9B,MAAMjC,EAASG,KAAKsB,OAEpBpC,QAAQ6C,oBAAqBlC,EAAOmC,OAAQ,GAE5C9C,QAAQ+C,aAAcpC,EAAOqC,GAAIhD,SAEjCW,EAAOsC,SAASC,gBAAiBlD,QAAS2C,EAE3C,CAOA,SAAAQ,CAAWR,GAEV,IAAsB,IAAjB7B,KAAK8B,QAAoB,OAE9B,MAAMjC,EAASG,KAAKsB,OAEpBpC,QAAQ6C,oBAAqBlC,EAAOmC,OAAQ,GAE5CnC,EAAOsC,SAASC,gBAAiBlD,QAAS2C,EAE3C,CAQA,IAAAS,CAAMC,GAAqB,GAE1BvC,KAAKF,WAAW0C,mBAAoB,CACnCD,sBAGF,CAKA,MAAAE,GAECzC,KAAKF,WAAWgB,cAAc4B,iBAE/B,EAMD,SAASpC,YAAaqC,GAErB,IAAsB,IAAjB3C,KAAK8B,UAAuC,IAAlB9B,KAAKC,SAAqB,OAEzD,MAAMJ,EAASG,KAAKsB,OACpBrC,OAAO2D,kBAAmB/C,EAAO8B,YAEjC1C,OAAO4D,GA3MmB,KA2MdF,EAAMG,UAAiC9C,KAAKI,aACxDnB,OAAO8D,GA5MmB,KA4MdJ,EAAMK,UAAiChD,KAAKI,aAExDnB,OAAO8D,EAAItD,KAAKwD,IAAKzD,MAAQQ,KAAKG,cAAeV,KAAKyD,IAAK1D,MAAQQ,KAAKE,cAAejB,OAAO8D,IAE9FlD,EAAO8B,WAAWwB,aAAclE,QAEhCe,KAAKoD,cAAejE,aAErB,CAEA,SAASsB,sBAEHT,KAAKF,WAAWgB,cAAcuC,qBAAuBrD,KAAKF,YAE9DE,KAAKoD,cAAe/D,YAEpBW,KAAKC,UAAW,IAIhBD,KAAKoD,cAAe9D,cAEpBU,KAAKC,UAAW,EAIlB,CAEA,SAASU,qBAERS,QAAQkC,MAAO,4DAEhB,QAES3D","ignoreList":[]}