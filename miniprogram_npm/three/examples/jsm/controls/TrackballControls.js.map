{"version":3,"file":"node_modules/three/examples/jsm/controls/TrackballControls.js","names":["Controls","MathUtils","MOUSE","Quaternion","Vector2","Vector3","_changeEvent","type","_startEvent","_endEvent","_EPS","_STATE","NONE","ROTATE","ZOOM","PAN","TOUCH_ROTATE","TOUCH_ZOOM_PAN","_v2","_mouseChange","_objectUp","_pan","_axis","_quaternion","_eyeDirection","_objectUpDirection","_objectSidewaysDirection","_moveDirection","TrackballControls","constructor","object","domElement","super","this","screen","left","top","width","height","rotateSpeed","zoomSpeed","panSpeed","noRotate","noZoom","noPan","staticMoving","dynamicDampingFactor","minDistance","maxDistance","Infinity","minZoom","maxZoom","keys","mouseButtons","LEFT","MIDDLE","DOLLY","RIGHT","target","state","keyState","_lastPosition","_lastZoom","_touchZoomDistanceStart","_touchZoomDistanceEnd","_lastAngle","_eye","_movePrev","_moveCurr","_lastAxis","_zoomStart","_zoomEnd","_panStart","_panEnd","_pointers","_pointerPositions","_onPointerMove","onPointerMove","bind","_onPointerDown","onPointerDown","_onPointerUp","onPointerUp","_onPointerCancel","onPointerCancel","_onContextMenu","onContextMenu","_onMouseWheel","onMouseWheel","_onKeyDown","onKeyDown","_onKeyUp","onKeyUp","_onTouchStart","onTouchStart","_onTouchMove","onTouchMove","_onTouchEnd","onTouchEnd","_onMouseDown","onMouseDown","_onMouseMove","onMouseMove","_onMouseUp","onMouseUp","_target0","clone","_position0","position","_up0","up","_zoom0","zoom","connect","handleResize","update","element","window","addEventListener","passive","style","touchAction","disconnect","removeEventListener","dispose","box","getBoundingClientRect","d","ownerDocument","documentElement","pageXOffset","clientLeft","pageYOffset","clientTop","subVectors","_rotateCamera","_zoomCamera","_panCamera","addVectors","isPerspectiveCamera","_checkDistances","lookAt","distanceToSquared","dispatchEvent","copy","isOrthographicCamera","console","warn","reset","updateProjectionMatrix","sub","lengthSq","scale_x","right","clientWidth","scale_y","bottom","x","y","multiplyScalar","length","cross","setLength","add","set","angle","normalize","crossVectors","setFromAxisAngle","applyQuaternion","Math","sqrt","factor","clamp","_getMouseOnScreen","pageX","pageY","_getMouseOnCircle","_addPointer","event","push","_removePointer","pointerId","i","splice","_trackPointer","undefined","_getSecondPointerPosition","pointer","enabled","setPointerCapture","pointerType","releasePointerCapture","code","mouseAction","button","preventDefault","deltaMode","deltaY","dx","dy"],"sources":["node_modules/three/examples/jsm/controls/TrackballControls.js"],"sourcesContent":["import {\n\tControls,\n\tMathUtils,\n\tMOUSE,\n\tQuaternion,\n\tVector2,\n\tVector3\n} from 'three';\n\n/**\n * Fires when the camera has been transformed by the controls.\n *\n * @event TrackballControls#change\n * @type {Object}\n */\nconst _changeEvent = { type: 'change' };\n\n/**\n * Fires when an interaction was initiated.\n *\n * @event TrackballControls#start\n * @type {Object}\n */\nconst _startEvent = { type: 'start' };\n\n/**\n * Fires when an interaction has finished.\n *\n * @event TrackballControls#end\n * @type {Object}\n */\nconst _endEvent = { type: 'end' };\n\nconst _EPS = 0.000001;\nconst _STATE = { NONE: - 1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4 };\n\nconst _v2 = new Vector2();\nconst _mouseChange = new Vector2();\nconst _objectUp = new Vector3();\nconst _pan = new Vector3();\nconst _axis = new Vector3();\nconst _quaternion = new Quaternion();\nconst _eyeDirection = new Vector3();\nconst _objectUpDirection = new Vector3();\nconst _objectSidewaysDirection = new Vector3();\nconst _moveDirection = new Vector3();\n\n/**\n * This class is similar to {@link OrbitControls}. However, it does not maintain a constant camera\n * `up` vector. That means if the camera orbits over the “north” and “south” poles, it does not flip\n * to stay \"right side up\".\n *\n * @augments Controls\n * @three_import import { TrackballControls } from 'three/addons/controls/TrackballControls.js';\n */\nclass TrackballControls extends Controls {\n\n\t/**\n\t * Constructs a new controls instance.\n\t *\n\t * @param {Object3D} object - The object that is managed by the controls.\n\t * @param {?HTMLDOMElement} domElement - The HTML element used for event listeners.\n\t */\n\tconstructor( object, domElement = null ) {\n\n\t\tsuper( object, domElement );\n\n\t\t/**\n\t\t * Represents the properties of the screen. Automatically set when `handleResize()` is called.\n\t\t *\n\t\t * @type {Object}\n\t\t * @readonly\n\t\t */\n\t\tthis.screen = { left: 0, top: 0, width: 0, height: 0 };\n\n\t\t/**\n\t\t * The rotation speed.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t/**\n\t\t * The zoom speed.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1.2\n\t\t */\n\t\tthis.zoomSpeed = 1.2;\n\n\t\t/**\n\t\t * The pan speed.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0.3\n\t\t */\n\t\tthis.panSpeed = 0.3;\n\n\t\t/**\n\t\t * Whether rotation is disabled or not.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.noRotate = false;\n\n\t\t/**\n\t\t * Whether zooming is disabled or not.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.noZoom = false;\n\n\t\t/**\n\t\t * Whether panning is disabled or not.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.noPan = false;\n\n\t\t/**\n\t\t * Whether damping is disabled or not.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.staticMoving = false;\n\n\t\t/**\n\t\t * Defines the intensity of damping. Only considered if `staticMoving` is set to `false`.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0.2\n\t\t */\n\t\tthis.dynamicDampingFactor = 0.2;\n\n\t\t/**\n\t\t * How far you can dolly in (perspective camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minDistance = 0;\n\n\t\t/**\n\t\t * How far you can dolly out (perspective camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tthis.maxDistance = Infinity;\n\n\t\t/**\n\t\t * How far you can zoom in (orthographic camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minZoom = 0;\n\n\t\t/**\n\t\t * How far you can zoom out (orthographic camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tthis.maxZoom = Infinity;\n\n\t\t/**\n\t\t * This array holds keycodes for controlling interactions.\n\t\t *\n\t\t * - When the first defined key is pressed, all mouse interactions (left, middle, right) performs orbiting.\n\t\t * - When the second defined key is pressed, all mouse interactions (left, middle, right) performs zooming.\n\t\t * - When the third defined key is pressed, all mouse interactions (left, middle, right) performs panning.\n\t\t *\n\t\t * Default is *KeyA, KeyS, KeyD* which represents A, S, D.\n\t\t *\n\t\t * @type {Array<string>}\n\t\t */\n\t\tthis.keys = [ 'KeyA' /*A*/, 'KeyS' /*S*/, 'KeyD' /*D*/ ];\n\n\t\t/**\n\t\t * This object contains references to the mouse actions used by the controls.\n\t\t *\n\t\t * ```js\n\t\t * controls.mouseButtons = {\n\t\t * \tLEFT: THREE.MOUSE.ROTATE,\n\t\t * \tMIDDLE: THREE.MOUSE.DOLLY,\n\t\t * \tRIGHT: THREE.MOUSE.PAN\n\t\t * }\n\t\t * ```\n\t\t * @type {Object}\n\t\t */\n\t\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t\t/**\n\t\t * The focus point of the controls.\n\t\t *\n\t\t * @type {Vector3}\n\t\t */\n\t\tthis.target = new Vector3();\n\n\t\t// internals\n\n\t\tthis.state = _STATE.NONE;\n\t\tthis.keyState = _STATE.NONE;\n\n\t\tthis._lastPosition = new Vector3();\n\t\tthis._lastZoom = 1;\n\t\tthis._touchZoomDistanceStart = 0;\n\t\tthis._touchZoomDistanceEnd = 0;\n\t\tthis._lastAngle = 0;\n\n\t\tthis._eye = new Vector3();\n\n\t\tthis._movePrev = new Vector2();\n\t\tthis._moveCurr = new Vector2();\n\n\t\tthis._lastAxis = new Vector3();\n\n\t\tthis._zoomStart = new Vector2();\n\t\tthis._zoomEnd = new Vector2();\n\n\t\tthis._panStart = new Vector2();\n\t\tthis._panEnd = new Vector2();\n\n\t\tthis._pointers = [];\n\t\tthis._pointerPositions = {};\n\n\t\t// event listeners\n\n\t\tthis._onPointerMove = onPointerMove.bind( this );\n\t\tthis._onPointerDown = onPointerDown.bind( this );\n\t\tthis._onPointerUp = onPointerUp.bind( this );\n\t\tthis._onPointerCancel = onPointerCancel.bind( this );\n\t\tthis._onContextMenu = onContextMenu.bind( this );\n\t\tthis._onMouseWheel = onMouseWheel.bind( this );\n\t\tthis._onKeyDown = onKeyDown.bind( this );\n\t\tthis._onKeyUp = onKeyUp.bind( this );\n\n\t\tthis._onTouchStart = onTouchStart.bind( this );\n\t\tthis._onTouchMove = onTouchMove.bind( this );\n\t\tthis._onTouchEnd = onTouchEnd.bind( this );\n\n\t\tthis._onMouseDown = onMouseDown.bind( this );\n\t\tthis._onMouseMove = onMouseMove.bind( this );\n\t\tthis._onMouseUp = onMouseUp.bind( this );\n\n\t\t// for reset\n\n\t\tthis._target0 = this.target.clone();\n\t\tthis._position0 = this.object.position.clone();\n\t\tthis._up0 = this.object.up.clone();\n\t\tthis._zoom0 = this.object.zoom;\n\n\t\tif ( domElement !== null ) {\n\n\t\t\tthis.connect( domElement );\n\n\t\t\tthis.handleResize();\n\n\t\t}\n\n\t\t// force an update at start\n\t\tthis.update();\n\n\t}\n\n\tconnect( element ) {\n\n\t\tsuper.connect( element );\n\n\t\twindow.addEventListener( 'keydown', this._onKeyDown );\n\t\twindow.addEventListener( 'keyup', this._onKeyUp );\n\n\t\tthis.domElement.addEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.addEventListener( 'pointercancel', this._onPointerCancel );\n\t\tthis.domElement.addEventListener( 'wheel', this._onMouseWheel, { passive: false } );\n\t\tthis.domElement.addEventListener( 'contextmenu', this._onContextMenu );\n\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t}\n\n\tdisconnect() {\n\n\t\twindow.removeEventListener( 'keydown', this._onKeyDown );\n\t\twindow.removeEventListener( 'keyup', this._onKeyUp );\n\n\t\tthis.domElement.removeEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.removeEventListener( 'pointerup', this._onPointerUp );\n\t\tthis.domElement.removeEventListener( 'pointercancel', this._onPointerCancel );\n\t\tthis.domElement.removeEventListener( 'wheel', this._onMouseWheel );\n\t\tthis.domElement.removeEventListener( 'contextmenu', this._onContextMenu );\n\n\t\tthis.domElement.style.touchAction = 'auto'; // disable touch scroll\n\n\t}\n\n\tdispose() {\n\n\t\tthis.disconnect();\n\n\t}\n\n\t/**\n\t * Must be called if the application window is resized.\n\t */\n\thandleResize() {\n\n\t\tconst box = this.domElement.getBoundingClientRect();\n\t\t// adjustments come from similar code in the jquery offset() function\n\t\tconst d = this.domElement.ownerDocument.documentElement;\n\n\t\tthis.screen.left = box.left + window.pageXOffset - d.clientLeft;\n\t\tthis.screen.top = box.top + window.pageYOffset - d.clientTop;\n\t\tthis.screen.width = box.width;\n\t\tthis.screen.height = box.height;\n\n\t}\n\n\tupdate() {\n\n\t\tthis._eye.subVectors( this.object.position, this.target );\n\n\t\tif ( ! this.noRotate ) {\n\n\t\t\tthis._rotateCamera();\n\n\t\t}\n\n\t\tif ( ! this.noZoom ) {\n\n\t\t\tthis._zoomCamera();\n\n\t\t}\n\n\t\tif ( ! this.noPan ) {\n\n\t\t\tthis._panCamera();\n\n\t\t}\n\n\t\tthis.object.position.addVectors( this.target, this._eye );\n\n\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\tthis._checkDistances();\n\n\t\t\tthis.object.lookAt( this.target );\n\n\t\t\tif ( this._lastPosition.distanceToSquared( this.object.position ) > _EPS ) {\n\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t\tthis._lastPosition.copy( this.object.position );\n\n\t\t\t}\n\n\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\tthis.object.lookAt( this.target );\n\n\t\t\tif ( this._lastPosition.distanceToSquared( this.object.position ) > _EPS || this._lastZoom !== this.object.zoom ) {\n\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t\tthis._lastPosition.copy( this.object.position );\n\t\t\t\tthis._lastZoom = this.object.zoom;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type.' );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Resets the controls to its initial state.\n\t */\n\treset() {\n\n\t\tthis.state = _STATE.NONE;\n\t\tthis.keyState = _STATE.NONE;\n\n\t\tthis.target.copy( this._target0 );\n\t\tthis.object.position.copy( this._position0 );\n\t\tthis.object.up.copy( this._up0 );\n\t\tthis.object.zoom = this._zoom0;\n\n\t\tthis.object.updateProjectionMatrix();\n\n\t\tthis._eye.subVectors( this.object.position, this.target );\n\n\t\tthis.object.lookAt( this.target );\n\n\t\tthis.dispatchEvent( _changeEvent );\n\n\t\tthis._lastPosition.copy( this.object.position );\n\t\tthis._lastZoom = this.object.zoom;\n\n\t}\n\n\t_panCamera() {\n\n\t\t_mouseChange.copy( this._panEnd ).sub( this._panStart );\n\n\t\tif ( _mouseChange.lengthSq() ) {\n\n\t\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\t\tconst scale_x = ( this.object.right - this.object.left ) / this.object.zoom / this.domElement.clientWidth;\n\t\t\t\tconst scale_y = ( this.object.top - this.object.bottom ) / this.object.zoom / this.domElement.clientWidth;\n\n\t\t\t\t_mouseChange.x *= scale_x;\n\t\t\t\t_mouseChange.y *= scale_y;\n\n\t\t\t}\n\n\t\t\t_mouseChange.multiplyScalar( this._eye.length() * this.panSpeed );\n\n\t\t\t_pan.copy( this._eye ).cross( this.object.up ).setLength( _mouseChange.x );\n\t\t\t_pan.add( _objectUp.copy( this.object.up ).setLength( _mouseChange.y ) );\n\n\t\t\tthis.object.position.add( _pan );\n\t\t\tthis.target.add( _pan );\n\n\t\t\tif ( this.staticMoving ) {\n\n\t\t\t\tthis._panStart.copy( this._panEnd );\n\n\t\t\t} else {\n\n\t\t\t\tthis._panStart.add( _mouseChange.subVectors( this._panEnd, this._panStart ).multiplyScalar( this.dynamicDampingFactor ) );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_rotateCamera() {\n\n\t\t_moveDirection.set( this._moveCurr.x - this._movePrev.x, this._moveCurr.y - this._movePrev.y, 0 );\n\t\tlet angle = _moveDirection.length();\n\n\t\tif ( angle ) {\n\n\t\t\tthis._eye.copy( this.object.position ).sub( this.target );\n\n\t\t\t_eyeDirection.copy( this._eye ).normalize();\n\t\t\t_objectUpDirection.copy( this.object.up ).normalize();\n\t\t\t_objectSidewaysDirection.crossVectors( _objectUpDirection, _eyeDirection ).normalize();\n\n\t\t\t_objectUpDirection.setLength( this._moveCurr.y - this._movePrev.y );\n\t\t\t_objectSidewaysDirection.setLength( this._moveCurr.x - this._movePrev.x );\n\n\t\t\t_moveDirection.copy( _objectUpDirection.add( _objectSidewaysDirection ) );\n\n\t\t\t_axis.crossVectors( _moveDirection, this._eye ).normalize();\n\n\t\t\tangle *= this.rotateSpeed;\n\t\t\t_quaternion.setFromAxisAngle( _axis, angle );\n\n\t\t\tthis._eye.applyQuaternion( _quaternion );\n\t\t\tthis.object.up.applyQuaternion( _quaternion );\n\n\t\t\tthis._lastAxis.copy( _axis );\n\t\t\tthis._lastAngle = angle;\n\n\t\t} else if ( ! this.staticMoving && this._lastAngle ) {\n\n\t\t\tthis._lastAngle *= Math.sqrt( 1.0 - this.dynamicDampingFactor );\n\t\t\tthis._eye.copy( this.object.position ).sub( this.target );\n\t\t\t_quaternion.setFromAxisAngle( this._lastAxis, this._lastAngle );\n\t\t\tthis._eye.applyQuaternion( _quaternion );\n\t\t\tthis.object.up.applyQuaternion( _quaternion );\n\n\t\t}\n\n\t\tthis._movePrev.copy( this._moveCurr );\n\n\t}\n\n\t_zoomCamera() {\n\n\t\tlet factor;\n\n\t\tif ( this.state === _STATE.TOUCH_ZOOM_PAN ) {\n\n\t\t\tfactor = this._touchZoomDistanceStart / this._touchZoomDistanceEnd;\n\t\t\tthis._touchZoomDistanceStart = this._touchZoomDistanceEnd;\n\n\t\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\tthis._eye.multiplyScalar( factor );\n\n\t\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\t\tthis.object.zoom = MathUtils.clamp( this.object.zoom / factor, this.minZoom, this.maxZoom );\n\n\t\t\t\tif ( this._lastZoom !== this.object.zoom ) {\n\n\t\t\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tfactor = 1.0 + ( this._zoomEnd.y - this._zoomStart.y ) * this.zoomSpeed;\n\n\t\t\tif ( factor !== 1.0 && factor > 0.0 ) {\n\n\t\t\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\t\tthis._eye.multiplyScalar( factor );\n\n\t\t\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\t\t\tthis.object.zoom = MathUtils.clamp( this.object.zoom / factor, this.minZoom, this.maxZoom );\n\n\t\t\t\t\tif ( this._lastZoom !== this.object.zoom ) {\n\n\t\t\t\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( this.staticMoving ) {\n\n\t\t\t\tthis._zoomStart.copy( this._zoomEnd );\n\n\t\t\t} else {\n\n\t\t\t\tthis._zoomStart.y += ( this._zoomEnd.y - this._zoomStart.y ) * this.dynamicDampingFactor;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_getMouseOnScreen( pageX, pageY ) {\n\n\t\t_v2.set(\n\t\t\t( pageX - this.screen.left ) / this.screen.width,\n\t\t\t( pageY - this.screen.top ) / this.screen.height\n\t\t);\n\n\t\treturn _v2;\n\n\t}\n\n\t_getMouseOnCircle( pageX, pageY ) {\n\n\t\t_v2.set(\n\t\t\t( ( pageX - this.screen.width * 0.5 - this.screen.left ) / ( this.screen.width * 0.5 ) ),\n\t\t\t( ( this.screen.height + 2 * ( this.screen.top - pageY ) ) / this.screen.width ) // screen.width intentional\n\t\t);\n\n\t\treturn _v2;\n\n\t}\n\n\t_addPointer( event ) {\n\n\t\tthis._pointers.push( event );\n\n\t}\n\n\t_removePointer( event ) {\n\n\t\tdelete this._pointerPositions[ event.pointerId ];\n\n\t\tfor ( let i = 0; i < this._pointers.length; i ++ ) {\n\n\t\t\tif ( this._pointers[ i ].pointerId == event.pointerId ) {\n\n\t\t\t\tthis._pointers.splice( i, 1 );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_trackPointer( event ) {\n\n\t\tlet position = this._pointerPositions[ event.pointerId ];\n\n\t\tif ( position === undefined ) {\n\n\t\t\tposition = new Vector2();\n\t\t\tthis._pointerPositions[ event.pointerId ] = position;\n\n\t\t}\n\n\t\tposition.set( event.pageX, event.pageY );\n\n\t}\n\n\t_getSecondPointerPosition( event ) {\n\n\t\tconst pointer = ( event.pointerId === this._pointers[ 0 ].pointerId ) ? this._pointers[ 1 ] : this._pointers[ 0 ];\n\n\t\treturn this._pointerPositions[ pointer.pointerId ];\n\n\t}\n\n\t_checkDistances() {\n\n\t\tif ( ! this.noZoom || ! this.noPan ) {\n\n\t\t\tif ( this._eye.lengthSq() > this.maxDistance * this.maxDistance ) {\n\n\t\t\t\tthis.object.position.addVectors( this.target, this._eye.setLength( this.maxDistance ) );\n\t\t\t\tthis._zoomStart.copy( this._zoomEnd );\n\n\t\t\t}\n\n\t\t\tif ( this._eye.lengthSq() < this.minDistance * this.minDistance ) {\n\n\t\t\t\tthis.object.position.addVectors( this.target, this._eye.setLength( this.minDistance ) );\n\t\t\t\tthis._zoomStart.copy( this._zoomEnd );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nfunction onPointerDown( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( this._pointers.length === 0 ) {\n\n\t\tthis.domElement.setPointerCapture( event.pointerId );\n\n\t\tthis.domElement.addEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.addEventListener( 'pointerup', this._onPointerUp );\n\n\t}\n\n\t//\n\n\tthis._addPointer( event );\n\n\tif ( event.pointerType === 'touch' ) {\n\n\t\tthis._onTouchStart( event );\n\n\t} else {\n\n\t\tthis._onMouseDown( event );\n\n\t}\n\n}\n\nfunction onPointerMove( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( event.pointerType === 'touch' ) {\n\n\t\tthis._onTouchMove( event );\n\n\t} else {\n\n\t\tthis._onMouseMove( event );\n\n\t}\n\n}\n\nfunction onPointerUp( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( event.pointerType === 'touch' ) {\n\n\t\tthis._onTouchEnd( event );\n\n\t} else {\n\n\t\tthis._onMouseUp();\n\n\t}\n\n\t//\n\n\tthis._removePointer( event );\n\n\tif ( this._pointers.length === 0 ) {\n\n\t\tthis.domElement.releasePointerCapture( event.pointerId );\n\n\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.removeEventListener( 'pointerup', this._onPointerUp );\n\n\t}\n\n}\n\nfunction onPointerCancel( event ) {\n\n\tthis._removePointer( event );\n\n}\n\nfunction onKeyUp() {\n\n\tif ( this.enabled === false ) return;\n\n\tthis.keyState = _STATE.NONE;\n\n\twindow.addEventListener( 'keydown', this._onKeyDown );\n\n}\n\nfunction onKeyDown( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\twindow.removeEventListener( 'keydown', this._onKeyDown );\n\n\tif ( this.keyState !== _STATE.NONE ) {\n\n\t\treturn;\n\n\t} else if ( event.code === this.keys[ _STATE.ROTATE ] && ! this.noRotate ) {\n\n\t\tthis.keyState = _STATE.ROTATE;\n\n\t} else if ( event.code === this.keys[ _STATE.ZOOM ] && ! this.noZoom ) {\n\n\t\tthis.keyState = _STATE.ZOOM;\n\n\t} else if ( event.code === this.keys[ _STATE.PAN ] && ! this.noPan ) {\n\n\t\tthis.keyState = _STATE.PAN;\n\n\t}\n\n}\n\nfunction onMouseDown( event ) {\n\n\tlet mouseAction;\n\n\tswitch ( event.button ) {\n\n\t\tcase 0:\n\t\t\tmouseAction = this.mouseButtons.LEFT;\n\t\t\tbreak;\n\n\t\tcase 1:\n\t\t\tmouseAction = this.mouseButtons.MIDDLE;\n\t\t\tbreak;\n\n\t\tcase 2:\n\t\t\tmouseAction = this.mouseButtons.RIGHT;\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tmouseAction = - 1;\n\n\t}\n\n\tswitch ( mouseAction ) {\n\n\t\tcase MOUSE.DOLLY:\n\t\t\tthis.state = _STATE.ZOOM;\n\t\t\tbreak;\n\n\t\tcase MOUSE.ROTATE:\n\t\t\tthis.state = _STATE.ROTATE;\n\t\t\tbreak;\n\n\t\tcase MOUSE.PAN:\n\t\t\tthis.state = _STATE.PAN;\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tthis.state = _STATE.NONE;\n\n\t}\n\n\tconst state = ( this.keyState !== _STATE.NONE ) ? this.keyState : this.state;\n\n\tif ( state === _STATE.ROTATE && ! this.noRotate ) {\n\n\t\tthis._moveCurr.copy( this._getMouseOnCircle( event.pageX, event.pageY ) );\n\t\tthis._movePrev.copy( this._moveCurr );\n\n\t} else if ( state === _STATE.ZOOM && ! this.noZoom ) {\n\n\t\tthis._zoomStart.copy( this._getMouseOnScreen( event.pageX, event.pageY ) );\n\t\tthis._zoomEnd.copy( this._zoomStart );\n\n\t} else if ( state === _STATE.PAN && ! this.noPan ) {\n\n\t\tthis._panStart.copy( this._getMouseOnScreen( event.pageX, event.pageY ) );\n\t\tthis._panEnd.copy( this._panStart );\n\n\t}\n\n\tthis.dispatchEvent( _startEvent );\n\n}\n\nfunction onMouseMove( event ) {\n\n\tconst state = ( this.keyState !== _STATE.NONE ) ? this.keyState : this.state;\n\n\tif ( state === _STATE.ROTATE && ! this.noRotate ) {\n\n\t\tthis._movePrev.copy( this._moveCurr );\n\t\tthis._moveCurr.copy( this._getMouseOnCircle( event.pageX, event.pageY ) );\n\n\t} else if ( state === _STATE.ZOOM && ! this.noZoom ) {\n\n\t\tthis._zoomEnd.copy( this._getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t} else if ( state === _STATE.PAN && ! this.noPan ) {\n\n\t\tthis._panEnd.copy( this._getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t}\n\n}\n\nfunction onMouseUp() {\n\n\tthis.state = _STATE.NONE;\n\n\tthis.dispatchEvent( _endEvent );\n\n}\n\nfunction onMouseWheel( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( this.noZoom === true ) return;\n\n\tevent.preventDefault();\n\n\tswitch ( event.deltaMode ) {\n\n\t\tcase 2:\n\t\t\t// Zoom in pages\n\t\t\tthis._zoomStart.y -= event.deltaY * 0.025;\n\t\t\tbreak;\n\n\t\tcase 1:\n\t\t\t// Zoom in lines\n\t\t\tthis._zoomStart.y -= event.deltaY * 0.01;\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\t// undefined, 0, assume pixels\n\t\t\tthis._zoomStart.y -= event.deltaY * 0.00025;\n\t\t\tbreak;\n\n\t}\n\n\tthis.dispatchEvent( _startEvent );\n\tthis.dispatchEvent( _endEvent );\n\n}\n\nfunction onContextMenu( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tevent.preventDefault();\n\n}\n\nfunction onTouchStart( event ) {\n\n\tthis._trackPointer( event );\n\n\tswitch ( this._pointers.length ) {\n\n\t\tcase 1:\n\t\t\tthis.state = _STATE.TOUCH_ROTATE;\n\t\t\tthis._moveCurr.copy( this._getMouseOnCircle( this._pointers[ 0 ].pageX, this._pointers[ 0 ].pageY ) );\n\t\t\tthis._movePrev.copy( this._moveCurr );\n\t\t\tbreak;\n\n\t\tdefault: // 2 or more\n\t\t\tthis.state = _STATE.TOUCH_ZOOM_PAN;\n\t\t\tconst dx = this._pointers[ 0 ].pageX - this._pointers[ 1 ].pageX;\n\t\t\tconst dy = this._pointers[ 0 ].pageY - this._pointers[ 1 ].pageY;\n\t\t\tthis._touchZoomDistanceEnd = this._touchZoomDistanceStart = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tconst x = ( this._pointers[ 0 ].pageX + this._pointers[ 1 ].pageX ) / 2;\n\t\t\tconst y = ( this._pointers[ 0 ].pageY + this._pointers[ 1 ].pageY ) / 2;\n\t\t\tthis._panStart.copy( this._getMouseOnScreen( x, y ) );\n\t\t\tthis._panEnd.copy( this._panStart );\n\t\t\tbreak;\n\n\t}\n\n\tthis.dispatchEvent( _startEvent );\n\n}\n\nfunction onTouchMove( event ) {\n\n\tthis._trackPointer( event );\n\n\tswitch ( this._pointers.length ) {\n\n\t\tcase 1:\n\t\t\tthis._movePrev.copy( this._moveCurr );\n\t\t\tthis._moveCurr.copy( this._getMouseOnCircle( event.pageX, event.pageY ) );\n\t\t\tbreak;\n\n\t\tdefault: // 2 or more\n\n\t\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\t\tconst dx = event.pageX - position.x;\n\t\t\tconst dy = event.pageY - position.y;\n\t\t\tthis._touchZoomDistanceEnd = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tconst x = ( event.pageX + position.x ) / 2;\n\t\t\tconst y = ( event.pageY + position.y ) / 2;\n\t\t\tthis._panEnd.copy( this._getMouseOnScreen( x, y ) );\n\t\t\tbreak;\n\n\t}\n\n}\n\nfunction onTouchEnd( event ) {\n\n\tswitch ( this._pointers.length ) {\n\n\t\tcase 0:\n\t\t\tthis.state = _STATE.NONE;\n\t\t\tbreak;\n\n\t\tcase 1:\n\t\t\tthis.state = _STATE.TOUCH_ROTATE;\n\t\t\tthis._moveCurr.copy( this._getMouseOnCircle( event.pageX, event.pageY ) );\n\t\t\tthis._movePrev.copy( this._moveCurr );\n\t\t\tbreak;\n\n\t\tcase 2:\n\t\t\tthis.state = _STATE.TOUCH_ZOOM_PAN;\n\n\t\t\tfor ( let i = 0; i < this._pointers.length; i ++ ) {\n\n\t\t\t\tif ( this._pointers[ i ].pointerId !== event.pointerId ) {\n\n\t\t\t\t\tconst position = this._pointerPositions[ this._pointers[ i ].pointerId ];\n\t\t\t\t\tthis._moveCurr.copy( this._getMouseOnCircle( position.x, position.y ) );\n\t\t\t\t\tthis._movePrev.copy( this._moveCurr );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t}\n\n\tthis.dispatchEvent( _endEvent );\n\n}\n\nexport { TrackballControls };\n"],"mappings":"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","ignoreList":[]}