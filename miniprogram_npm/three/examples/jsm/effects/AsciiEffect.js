class AsciiEffect{constructor(e,t=" .:-=+*#%@",o={}){const c=o.resolution||.15,l=o.scale||1,s=o.color||!1,a=o.alpha||!1,n=o.block||!1,r=o.invert||!1,i=o.strResolution||"low";let d,f;const g=document.createElement("div");g.style.cursor="default";const p=document.createElement("table");let h,m,u;g.appendChild(p),this.setSize=function(t,o){d=t,f=o,e.setSize(t,o),function(){h=Math.floor(d*c),m=Math.floor(f*c),w.width=h,w.height=m,u=e.domElement,u.style.backgroundColor&&(p.rows[0].cells[0].style.backgroundColor=u.style.backgroundColor,p.rows[0].cells[0].style.color=u.style.color);p.cellSpacing="0",p.cellPadding="0";const t=p.style;t.whiteSpace="pre",t.margin="0px",t.padding="0px",t.letterSpacing=S+"px",t.fontFamily=b,t.fontSize=C+"px",t.lineHeight=E+"px",t.textAlign="left",t.textDecoration="none"}()},this.render=function(t,o){e.render(t,o),function(e){x.clearRect(0,0,h,m),x.drawImage(k,0,0,h,m);const t=x.getImageData(0,0,h,m).data;let o="";for(let e=0;e<m;e+=2){for(let c=0;c<h;c++){const l=4*(e*h+c),i=t[l],d=t[l+1],f=t[l+2],g=t[l+3];let p,m;m=(.3*i+.59*d+.11*f)/255,0==g&&(m=1),p=Math.floor((1-m)*(y.length-1)),r&&(p=y.length-p-1);let u=y[p];void 0!==u&&" "!=u||(u="&nbsp;"),o+=s?"<span style='color:rgb("+i+","+d+","+f+");"+(n?"background-color:rgb("+i+","+d+","+f+");":"")+(a?"opacity:"+g/255+";":"")+"'>"+u+"</span>":u}o+="<br/>"}e.innerHTML=`<tr><td style="display:block;width:${d}px;height:${f}px;overflow:hidden">${o}</td></tr>`}(p)},this.domElement=g;const b="courier new, monospace",k=e.domElement,w=document.createElement("canvas");if(!w.getContext)return;const x=w.getContext("2d");if(!x.getImageData)return;let y;if(t)y=t.split("");else{const e=" .,:;i1tfLCG08@".split(""),t=" CGO08@".split("");y=s?t:e}const C=2/c*l,E=2/c*l;let S=0;if("low"==i)switch(l){case 1:S=-1;break;case 2:case 3:S=-2.1;break;case 4:S=-3.1;break;case 5:S=-4.15}if("medium"==i)switch(l){case 1:S=0;break;case 2:S=-1;break;case 3:S=-1.04;break;case 4:case 5:S=-2.1}if("high"==i)switch(l){case 1:case 2:S=0;break;case 3:case 4:case 5:S=-1}}}export{AsciiEffect};
//# sourceMappingURL=AsciiEffect.js.map