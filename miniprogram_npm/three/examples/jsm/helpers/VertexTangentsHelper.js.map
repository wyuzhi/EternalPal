{"version":3,"file":"node_modules/three/examples/jsm/helpers/VertexTangentsHelper.js","names":["BufferGeometry","Float32BufferAttribute","LineSegments","LineBasicMaterial","Vector3","_v1","_v2","VertexTangentsHelper","constructor","object","size","color","geometry","nTangents","attributes","tangent","count","positions","setAttribute","super","toneMapped","this","type","matrixAutoUpdate","update","updateMatrixWorld","matrixWorld","position","objGeometry","objPos","objTan","idx","j","jl","fromBufferAttribute","applyMatrix4","transformDirection","multiplyScalar","add","setXYZ","x","y","z","needsUpdate","dispose","material"],"sources":["node_modules/three/examples/jsm/helpers/VertexTangentsHelper.js"],"sourcesContent":["import {\n\tBufferGeometry,\n\tFloat32BufferAttribute,\n\tLineSegments,\n\tLineBasicMaterial,\n\tVector3\n} from 'three';\n\nconst _v1 = new Vector3();\nconst _v2 = new Vector3();\n\n/**\n * Visualizes an object's vertex tangents.\n *\n * Requires that tangents have been specified in the geometry as a buffer attribute or\n * have been calculated using {@link BufferGeometry#computeTangents}.\n * ```js\n * const helper = new VertexTangentsHelper( mesh, 1, 0xff0000 );\n * scene.add( helper );\n * ```\n *\n * @augments LineSegments\n * @three_import import { VertexTangentsHelper } from 'three/addons/helpers/VertexTangentsHelper.js';\n */\nclass VertexTangentsHelper extends LineSegments {\n\n\t/**\n\t * Constructs a new vertex tangents helper.\n\t *\n\t * @param {Object3D} object - The object for which to visualize vertex tangents.\n\t * @param {number} [size=1] - The helper's size.\n\t * @param {number|Color|string} [color=0xff0000] - The helper's color.\n\t */\n\tconstructor( object, size = 1, color = 0x00ffff ) {\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tconst nTangents = object.geometry.attributes.tangent.count;\n\t\tconst positions = new Float32BufferAttribute( nTangents * 2 * 3, 3 );\n\n\t\tgeometry.setAttribute( 'position', positions );\n\n\t\tsuper( geometry, new LineBasicMaterial( { color, toneMapped: false } ) );\n\n\t\t/**\n\t\t * The object for which to visualize vertex tangents.\n\t\t *\n\t\t * @type {Object3D}\n\t\t */\n\t\tthis.object = object;\n\n\t\t/**\n\t\t * The helper's size.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.size = size;\n\n\t\tthis.type = 'VertexTangentsHelper';\n\n\t\t/**\n\t\t * Overwritten and set to `false` since the object's world transformation\n\t\t * is encoded in the helper's geometry data.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.update();\n\n\t}\n\n\t/**\n\t * Updates the vertex normals preview based on the object's world transform.\n\t */\n\tupdate() {\n\n\t\tthis.object.updateMatrixWorld( true );\n\n\t\tconst matrixWorld = this.object.matrixWorld;\n\n\t\tconst position = this.geometry.attributes.position;\n\n\t\t//\n\n\t\tconst objGeometry = this.object.geometry;\n\n\t\tconst objPos = objGeometry.attributes.position;\n\n\t\tconst objTan = objGeometry.attributes.tangent;\n\n\t\tlet idx = 0;\n\n\t\t// for simplicity, ignore index and drawcalls, and render every tangent\n\n\t\tfor ( let j = 0, jl = objPos.count; j < jl; j ++ ) {\n\n\t\t\t_v1.fromBufferAttribute( objPos, j ).applyMatrix4( matrixWorld );\n\n\t\t\t_v2.fromBufferAttribute( objTan, j );\n\n\t\t\t_v2.transformDirection( matrixWorld ).multiplyScalar( this.size ).add( _v1 );\n\n\t\t\tposition.setXYZ( idx, _v1.x, _v1.y, _v1.z );\n\n\t\t\tidx = idx + 1;\n\n\t\t\tposition.setXYZ( idx, _v2.x, _v2.y, _v2.z );\n\n\t\t\tidx = idx + 1;\n\n\t\t}\n\n\t\tposition.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Frees the GPU-related resources allocated by this instance. Call this\n\t * method whenever this instance is no longer used in your app.\n\t */\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\nexport { VertexTangentsHelper };\n"],"mappings":"OACCA,eACAC,uBACAC,aACAC,kBACAC,YACM,QAEP,MAAMC,IAAM,IAAID,QACVE,IAAM,IAAIF,QAehB,MAAMG,6BAA6BL,aASlC,WAAAM,CAAaC,EAAQC,EAAO,EAAGC,EAAQ,OAEtC,MAAMC,EAAW,IAAIZ,eAEfa,EAAYJ,EAAOG,SAASE,WAAWC,QAAQC,MAC/CC,EAAY,IAAIhB,uBAAoC,EAAZY,EAAgB,EAAG,GAEjED,EAASM,aAAc,WAAYD,GAEnCE,MAAOP,EAAU,IAAIT,kBAAmB,CAAEQ,QAAOS,YAAY,KAO7DC,KAAKZ,OAASA,EAQdY,KAAKX,KAAOA,EAEZW,KAAKC,KAAO,uBASZD,KAAKE,kBAAmB,EAExBF,KAAKG,QAEN,CAKA,MAAAA,GAECH,KAAKZ,OAAOgB,mBAAmB,GAE/B,MAAMC,EAAcL,KAAKZ,OAAOiB,YAE1BC,EAAWN,KAAKT,SAASE,WAAWa,SAIpCC,EAAcP,KAAKZ,OAAOG,SAE1BiB,EAASD,EAAYd,WAAWa,SAEhCG,EAASF,EAAYd,WAAWC,QAEtC,IAAIgB,EAAM,EAIV,IAAM,IAAIC,EAAI,EAAGC,EAAKJ,EAAOb,MAAOgB,EAAIC,EAAID,IAE3C3B,IAAI6B,oBAAqBL,EAAQG,GAAIG,aAAcT,GAEnDpB,IAAI4B,oBAAqBJ,EAAQE,GAEjC1B,IAAI8B,mBAAoBV,GAAcW,eAAgBhB,KAAKX,MAAO4B,IAAKjC,KAEvEsB,EAASY,OAAQR,EAAK1B,IAAImC,EAAGnC,IAAIoC,EAAGpC,IAAIqC,GAExCX,GAAY,EAEZJ,EAASY,OAAQR,EAAKzB,IAAIkC,EAAGlC,IAAImC,EAAGnC,IAAIoC,GAExCX,GAAY,EAIbJ,EAASgB,aAAc,CAExB,CAMA,OAAAC,GAECvB,KAAKT,SAASgC,UACdvB,KAAKwB,SAASD,SAEf,SAIQrC","ignoreList":[]}