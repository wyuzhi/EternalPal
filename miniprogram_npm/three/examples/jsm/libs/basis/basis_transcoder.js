var BASIS=(()=>{var e="undefined"!=typeof document?document.currentScript?.src:void 0;return"undefined"!=typeof __filename&&(e||=__filename),function(r={}){var t,n,a,o,s=r,i=new Promise(((e,r)=>{t=e,n=r})),u="object"==typeof window,l="function"==typeof importScripts,c="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,p=Object.assign({},s),d="";if(c){var h=require("fs"),f=require("path");d=__dirname+"/",o=e=>(e=V(e)?new URL(e):f.normalize(e),h.readFileSync(e)),a=(e,r=!0)=>(e=V(e)?new URL(e):f.normalize(e),new Promise(((t,n)=>{h.readFile(e,r?void 0:"utf8",((e,a)=>{e?n(e):t(r?a.buffer:a)}))}))),!s.thisProgram&&process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),(e,r)=>{throw process.exitCode=e,r}}else(u||l)&&(l?d=self.location.href:"undefined"!=typeof document&&document.currentScript&&(d=document.currentScript.src),e&&(d=e),d=d.startsWith("blob:")?"":d.substr(0,d.replace(/[?#].*/,"").lastIndexOf("/")+1),l&&(o=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),a=e=>V(e)?new Promise(((r,t)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{(200==n.status||0==n.status&&n.response)&&t(n.response),r(n.status)},n.onerror=r,n.send(null)})):fetch(e,{credentials:"same-origin"}).then((e=>e.ok?e.arrayBuffer():Promise.reject(new Error(e.status+" : "+e.url)))));var v,y,m=s.print||console.log.bind(console),g=s.printErr||console.error.bind(console);Object.assign(s,p),p=null,s.arguments&&s.arguments,s.thisProgram&&s.thisProgram,s.quit&&s.quit,s.wasmBinary&&(v=s.wasmBinary);var $,w,T,b,C,P,A,W,_=!1;function S(){var e=y.buffer;s.HEAP8=$=new Int8Array(e),s.HEAP16=T=new Int16Array(e),s.HEAPU8=w=new Uint8Array(e),s.HEAPU16=b=new Uint16Array(e),s.HEAP32=C=new Int32Array(e),s.HEAPU32=P=new Uint32Array(e),s.HEAPF32=A=new Float32Array(e),s.HEAPF64=W=new Float64Array(e)}var F=[],j=[],E=[];var k=0,O=null,R=null;function D(e){s.onAbort?.(e),g(e="Aborted("+e+")"),_=!0,1,e+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(e);throw n(r),r}var x,I=e=>e.startsWith("data:application/octet-stream;base64,"),V=e=>e.startsWith("file://");function U(){var e,r="basis_transcoder.wasm";return I(r)?r:(e=r,s.locateFile?s.locateFile(e,d):d+e)}function H(e){if(e==x&&v)return new Uint8Array(v);if(o)return o(e);throw"both async and sync fetching of the wasm failed"}function B(e,r,t){return function(e){return v?Promise.resolve().then((()=>H(e))):a(e).then((e=>new Uint8Array(e)),(()=>H(e)))}(e).then((e=>WebAssembly.instantiate(e,r))).then(t,(e=>{g(`failed to asynchronously prepare wasm: ${e}`),D(e)}))}var M=e=>{for(;e.length>0;)e.shift()(s)};s.noExitRuntime;class q{constructor(e){this.excPtr=e,this.ptr=e-24}set_type(e){P[this.ptr+4>>2]=e}get_type(){return P[this.ptr+4>>2]}set_destructor(e){P[this.ptr+8>>2]=e}get_destructor(){return P[this.ptr+8>>2]}set_caught(e){e=e?1:0,$[this.ptr+12]=e}get_caught(){return 0!=$[this.ptr+12]}set_rethrown(e){e=e?1:0,$[this.ptr+13]=e}get_rethrown(){return 0!=$[this.ptr+13]}init(e,r){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(r)}set_adjusted_ptr(e){P[this.ptr+16>>2]=e}get_adjusted_ptr(){return P[this.ptr+16>>2]}get_exception_ptr(){if(Sr(this.get_type()))return P[this.excPtr>>2];var e=this.get_adjusted_ptr();return 0!==e?e:this.excPtr}}var N={},z=e=>{for(;e.length;){var r=e.pop();e.pop()(r)}};function L(e){return this.fromWireType(P[e>>2])}var G,X,J,K={},Q={},Z={},Y=e=>{throw new G(e)},ee=(e,r,t)=>{function n(r){var n=t(r);n.length!==e.length&&Y("Mismatched type converter count");for(var a=0;a<e.length;++a)ne(e[a],n[a])}e.forEach((function(e){Z[e]=r}));var a=new Array(r.length),o=[],s=0;r.forEach(((e,r)=>{Q.hasOwnProperty(e)?a[r]=Q[e]:(o.push(e),K.hasOwnProperty(e)||(K[e]=[]),K[e].push((()=>{a[r]=Q[e],++s===o.length&&n(a)})))})),0===o.length&&n(a)},re=e=>{for(var r="",t=e;w[t];)r+=X[w[t++]];return r},te=e=>{throw new J(e)};function ne(e,r,t={}){if(!("argPackAdvance"in r))throw new TypeError("registerType registeredInstance requires argPackAdvance");return function(e,r,t={}){var n=r.name;if(e||te(`type "${n}" must have a positive integer typeid pointer`),Q.hasOwnProperty(e)){if(t.ignoreDuplicateRegistrations)return;te(`Cannot register type '${n}' twice`)}if(Q[e]=r,delete Z[e],K.hasOwnProperty(e)){var a=K[e];delete K[e],a.forEach((e=>e()))}}(e,r,t)}var ae,oe=8,se=e=>{te(e.$$.ptrType.registeredClass.name+" instance already deleted")},ie=!1,ue=e=>{},le=e=>{e.count.value-=1,0===e.count.value&&(e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)})(e)},ce=(e,r,t)=>{if(r===t)return e;if(void 0===t.baseClass)return null;var n=ce(e,r,t.baseClass);return null===n?null:t.downcast(n)},pe={},de=()=>Object.keys(me).length,he=()=>{var e=[];for(var r in me)me.hasOwnProperty(r)&&e.push(me[r]);return e},fe=[],ve=()=>{for(;fe.length;){var e=fe.pop();e.$$.deleteScheduled=!1,e.delete()}},ye=e=>{ae=e,fe.length&&ae&&ae(ve)},me={},ge=(e,r)=>(r=((e,r)=>{for(void 0===r&&te("ptr should not be undefined");e.baseClass;)r=e.upcast(r),e=e.baseClass;return r})(e,r),me[r]),$e=(e,r)=>(r.ptrType&&r.ptr||Y("makeClassHandle requires ptr and ptrType"),!!r.smartPtrType!==!!r.smartPtr&&Y("Both smartPtrType and smartPtr must be specified"),r.count={value:1},Te(Object.create(e,{$$:{value:r,writable:!0}})));function we(e){var r=this.getPointee(e);if(!r)return this.destructor(e),null;var t=ge(this.registeredClass,r);if(void 0!==t){if(0===t.$$.count.value)return t.$$.ptr=r,t.$$.smartPtr=e,t.clone();var n=t.clone();return this.destructor(e),n}function a(){return this.isSmartPointer?$e(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:r,smartPtrType:this,smartPtr:e}):$e(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var o,s=this.registeredClass.getActualType(r),i=pe[s];if(!i)return a.call(this);o=this.isConst?i.constPointerType:i.pointerType;var u=ce(r,this.registeredClass,o.registeredClass);return null===u?a.call(this):this.isSmartPointer?$e(o.registeredClass.instancePrototype,{ptrType:o,ptr:u,smartPtrType:this,smartPtr:e}):$e(o.registeredClass.instancePrototype,{ptrType:o,ptr:u})}var Te=e=>"undefined"==typeof FinalizationRegistry?(Te=e=>e,e):(ie=new FinalizationRegistry((e=>{le(e.$$)})),Te=e=>{var r=e.$$;if(!!r.smartPtr){var t={$$:r};ie.register(e,t,e)}return e},ue=e=>ie.unregister(e),Te(e));function be(){}var Ce=(e,r)=>Object.defineProperty(r,"name",{value:e}),Pe=(e,r,t)=>{if(void 0===e[r].overloadTable){var n=e[r];e[r]=function(...n){return e[r].overloadTable.hasOwnProperty(n.length)||te(`Function '${t}' called with an invalid number of arguments (${n.length}) - expects one of (${e[r].overloadTable})!`),e[r].overloadTable[n.length].apply(this,n)},e[r].overloadTable=[],e[r].overloadTable[n.argCount]=n}},Ae=(e,r,t)=>{s.hasOwnProperty(e)?((void 0===t||void 0!==s[e].overloadTable&&void 0!==s[e].overloadTable[t])&&te(`Cannot register public name '${e}' twice`),Pe(s,e,e),s.hasOwnProperty(t)&&te(`Cannot register multiple overloads of a function with the same number of arguments (${t})!`),s[e].overloadTable[t]=r):(s[e]=r,void 0!==t&&(s[e].numArguments=t))};function We(e,r,t,n,a,o,s,i){this.name=e,this.constructor=r,this.instancePrototype=t,this.rawDestructor=n,this.baseClass=a,this.getActualType=o,this.upcast=s,this.downcast=i,this.pureVirtualFunctions=[]}var _e=(e,r,t)=>{for(;r!==t;)r.upcast||te(`Expected null or instance of ${t.name}, got an instance of ${r.name}`),e=r.upcast(e),r=r.baseClass;return e};function Se(e,r){if(null===r)return this.isReference&&te(`null is not a valid ${this.name}`),0;r.$$||te(`Cannot pass "${er(r)}" as a ${this.name}`),r.$$.ptr||te(`Cannot pass deleted object as a pointer of type ${this.name}`);var t=r.$$.ptrType.registeredClass;return _e(r.$$.ptr,t,this.registeredClass)}function Fe(e,r){var t;if(null===r)return this.isReference&&te(`null is not a valid ${this.name}`),this.isSmartPointer?(t=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,t),t):0;r&&r.$$||te(`Cannot pass "${er(r)}" as a ${this.name}`),r.$$.ptr||te(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&r.$$.ptrType.isConst&&te(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);var n=r.$$.ptrType.registeredClass;if(t=_e(r.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(void 0===r.$$.smartPtr&&te("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:r.$$.smartPtrType===this?t=r.$$.smartPtr:te(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:t=r.$$.smartPtr;break;case 2:if(r.$$.smartPtrType===this)t=r.$$.smartPtr;else{var a=r.clone();t=this.rawShare(t,Ke.toHandle((()=>a.delete()))),null!==e&&e.push(this.rawDestructor,t)}break;default:te("Unsupporting sharing policy")}return t}function je(e,r){if(null===r)return this.isReference&&te(`null is not a valid ${this.name}`),0;r.$$||te(`Cannot pass "${er(r)}" as a ${this.name}`),r.$$.ptr||te(`Cannot pass deleted object as a pointer of type ${this.name}`),r.$$.ptrType.isConst&&te(`Cannot convert argument of type ${r.$$.ptrType.name} to parameter type ${this.name}`);var t=r.$$.ptrType.registeredClass;return _e(r.$$.ptr,t,this.registeredClass)}function Ee(e,r,t,n,a,o,s,i,u,l,c){this.name=e,this.registeredClass=r,this.isReference=t,this.isConst=n,this.isSmartPointer=a,this.pointeeType=o,this.sharingPolicy=s,this.rawGetPointee=i,this.rawConstructor=u,this.rawShare=l,this.rawDestructor=c,a||void 0!==r.baseClass?this.toWireType=Fe:n?(this.toWireType=Se,this.destructorFunction=null):(this.toWireType=je,this.destructorFunction=null)}var ke,Oe,Re=(e,r,t)=>{s.hasOwnProperty(e)||Y("Replacing nonexistent public symbol"),void 0!==s[e].overloadTable&&void 0!==t?s[e].overloadTable[t]=r:(s[e]=r,s[e].argCount=t)},De=[],xe=e=>{var r=De[e];return r||(e>=De.length&&(De.length=e+1),De[e]=r=ke.get(e)),r},Ie=(e,r,t=[])=>e.includes("j")?((e,r,t)=>(e=e.replace(/p/g,"i"),(0,s["dynCall_"+e])(r,...t)))(e,r,t):xe(r)(...t),Ve=(e,r)=>{var t,n,a=(e=re(e)).includes("j")?(t=e,n=r,(...e)=>Ie(t,n,e)):xe(r);return"function"!=typeof a&&te(`unknown function pointer with signature ${e}: ${r}`),a},Ue=e=>{var r=Ar(e),t=re(r);return _r(r),t},He=(e,r)=>{var t=[],n={};throw r.forEach((function e(r){n[r]||Q[r]||(Z[r]?Z[r].forEach(e):(t.push(r),n[r]=!0))})),new Oe(`${e}: `+t.map(Ue).join([", "]))},Be=(e,r)=>{for(var t=[],n=0;n<e;n++)t.push(P[r+4*n>>2]);return t};function Me(e){for(var r=1;r<e.length;++r)if(null!==e[r]&&void 0===e[r].destructorFunction)return!0;return!1}function qe(e,r){if(!(e instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof e} which is not a function`);var t=Ce(e.name||"unknownFunctionName",(function(){}));t.prototype=e.prototype;var n=new t,a=e.apply(n,r);return a instanceof Object?a:n}function Ne(e,r,t,n,a,o){var s=r.length;s<2&&te("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var i=null!==r[1]&&null!==t,u=Me(r),l="void"!==r[0].name,c=[e,te,n,a,z,r[0],r[1]],p=0;p<s-2;++p)c.push(r[p+2]);if(!u)for(p=i?1:2;p<r.length;++p)null!==r[p].destructorFunction&&c.push(r[p].destructorFunction);let[d,h]=function(e,r,t,n){for(var a=Me(e),o=e.length,s="",i="",u=0;u<o-2;++u)s+=(0!==u?", ":"")+"arg"+u,i+=(0!==u?", ":"")+"arg"+u+"Wired";var l=`\n        return function (${s}) {\n        if (arguments.length !== ${o-2}) {\n          throwBindingError('function ' + humanName + ' called with ' + arguments.length + ' arguments, expected ${o-2}');\n        }`;a&&(l+="var destructors = [];\n");var c=a?"destructors":"null",p=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"];for(r&&(l+="var thisWired = classParam['toWireType']("+c+", this);\n"),u=0;u<o-2;++u)l+="var arg"+u+"Wired = argType"+u+"['toWireType']("+c+", arg"+u+");\n",p.push("argType"+u);if(r&&(i="thisWired"+(i.length>0?", ":"")+i),l+=(t||n?"var rv = ":"")+"invoker(fn"+(i.length>0?", ":"")+i+");\n",a)l+="runDestructors(destructors);\n";else for(u=r?1:2;u<e.length;++u){var d=1===u?"thisWired":"arg"+(u-2)+"Wired";null!==e[u].destructorFunction&&(l+=`${d}_dtor(${d});\n`,p.push(`${d}_dtor`))}return t&&(l+="var ret = retType['fromWireType'](rv);\nreturn ret;\n"),[p,l+="}\n"]}(r,i,l,o);d.push(h);var f=qe(Function,d)(...c);return Ce(e,f)}var ze=e=>{const r=(e=e.trim()).indexOf("(");return-1!==r?e.substr(0,r):e},Le=[],Ge=[],Xe=e=>{e>9&&0==--Ge[e+1]&&(Ge[e]=void 0,Le.push(e))},Je=()=>Ge.length/2-5-Le.length,Ke={toValue:e=>(e||te("Cannot use deleted val. handle = "+e),Ge[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const r=Le.pop()||Ge.length;return Ge[r]=e,Ge[r+1]=1,r}}}},Qe={name:"emscripten::val",fromWireType:e=>{var r=Ke.toValue(e);return Xe(e),r},toWireType:(e,r)=>Ke.toHandle(r),argPackAdvance:oe,readValueFromPointer:L,destructorFunction:null},Ze=(e,r,t)=>{switch(r){case 1:return t?function(e){return this.fromWireType($[e])}:function(e){return this.fromWireType(w[e])};case 2:return t?function(e){return this.fromWireType(T[e>>1])}:function(e){return this.fromWireType(b[e>>1])};case 4:return t?function(e){return this.fromWireType(C[e>>2])}:function(e){return this.fromWireType(P[e>>2])};default:throw new TypeError(`invalid integer width (${r}): ${e}`)}},Ye=(e,r)=>{var t=Q[e];return void 0===t&&te(`${r} has unknown type ${Ue(e)}`),t},er=e=>{if(null===e)return"null";var r=typeof e;return"object"===r||"array"===r||"function"===r?e.toString():""+e},rr=(e,r)=>{switch(r){case 4:return function(e){return this.fromWireType(A[e>>2])};case 8:return function(e){return this.fromWireType(W[e>>3])};default:throw new TypeError(`invalid float width (${r}): ${e}`)}},tr=(e,r,t)=>{switch(r){case 1:return t?e=>$[e]:e=>w[e];case 2:return t?e=>T[e>>1]:e=>b[e>>1];case 4:return t?e=>C[e>>2]:e=>P[e>>2];default:throw new TypeError(`invalid integer width (${r}): ${e}`)}},nr="undefined"!=typeof TextDecoder?new TextDecoder:void 0,ar=(e,r,t)=>{for(var n=r+t,a=r;e[a]&&!(a>=n);)++a;if(a-r>16&&e.buffer&&nr)return nr.decode(e.subarray(r,a));for(var o="";r<a;){var s=e[r++];if(128&s){var i=63&e[r++];if(192!=(224&s)){var u=63&e[r++];if((s=224==(240&s)?(15&s)<<12|i<<6|u:(7&s)<<18|i<<12|u<<6|63&e[r++])<65536)o+=String.fromCharCode(s);else{var l=s-65536;o+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else o+=String.fromCharCode((31&s)<<6|i)}else o+=String.fromCharCode(s)}return o},or="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,sr=(e,r)=>{for(var t=e,n=t>>1,a=n+r/2;!(n>=a)&&b[n];)++n;if((t=n<<1)-e>32&&or)return or.decode(w.subarray(e,t));for(var o="",s=0;!(s>=r/2);++s){var i=T[e+2*s>>1];if(0==i)break;o+=String.fromCharCode(i)}return o},ir=(e,r,t)=>{if(t??=2147483647,t<2)return 0;for(var n=r,a=(t-=2)<2*e.length?t/2:e.length,o=0;o<a;++o){var s=e.charCodeAt(o);T[r>>1]=s,r+=2}return T[r>>1]=0,r-n},ur=e=>2*e.length,lr=(e,r)=>{for(var t=0,n="";!(t>=r/4);){var a=C[e+4*t>>2];if(0==a)break;if(++t,a>=65536){var o=a-65536;n+=String.fromCharCode(55296|o>>10,56320|1023&o)}else n+=String.fromCharCode(a)}return n},cr=(e,r,t)=>{if(t??=2147483647,t<4)return 0;for(var n=r,a=n+t-4,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343)s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o);if(C[r>>2]=s,(r+=4)+4>a)break}return C[r>>2]=0,r-n},pr=e=>{for(var r=0,t=0;t<e.length;++t){var n=e.charCodeAt(t);n>=55296&&n<=57343&&++t,r+=4}return r},dr=(e,r,t)=>{var n=[],a=e.toWireType(n,t);return n.length&&(P[r>>2]=Ke.toHandle(n)),a},hr=[],fr={},vr=e=>{var r=fr[e];return void 0===r?re(e):r},yr=()=>"object"==typeof globalThis?globalThis:Function("return this")(),mr=(Reflect.construct,e=>{var r=(e-y.buffer.byteLength+65535)/65536;try{return y.grow(r),S(),1}catch(e){}});var gr,$r,wr,Tr=[null,[],[]];G=s.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},(()=>{for(var e=new Array(256),r=0;r<256;++r)e[r]=String.fromCharCode(r);X=e})(),J=s.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},Object.assign(be.prototype,{isAliasOf(e){if(!(this instanceof be))return!1;if(!(e instanceof be))return!1;var r=this.$$.ptrType.registeredClass,t=this.$$.ptr;e.$$=e.$$;for(var n=e.$$.ptrType.registeredClass,a=e.$$.ptr;r.baseClass;)t=r.upcast(t),r=r.baseClass;for(;n.baseClass;)a=n.upcast(a),n=n.baseClass;return r===n&&t===a},clone(){if(this.$$.ptr||se(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e,r=Te(Object.create(Object.getPrototypeOf(this),{$$:{value:(e=this.$$,{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType})}}));return r.$$.count.value+=1,r.$$.deleteScheduled=!1,r},delete(){this.$$.ptr||se(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&te("Object already scheduled for deletion"),ue(this),le(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||se(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&te("Object already scheduled for deletion"),fe.push(this),1===fe.length&&ae&&ae(ve),this.$$.deleteScheduled=!0,this}}),s.getInheritedInstanceCount=de,s.getLiveInheritedInstances=he,s.flushPendingDeletes=ve,s.setDelayFunction=ye,Object.assign(Ee.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){this.rawDestructor?.(e)},argPackAdvance:oe,readValueFromPointer:L,fromWireType:we}),Oe=s.UnboundTypeError=(gr=Error,(wr=Ce($r="UnboundTypeError",(function(e){this.name=$r,this.message=e;var r=new Error(e).stack;void 0!==r&&(this.stack=this.toString()+"\n"+r.replace(/^Error(:[^\n]*)?\n/,""))}))).prototype=Object.create(gr.prototype),wr.prototype.constructor=wr,wr.prototype.toString=function(){return void 0===this.message?this.name:`${this.name}: ${this.message}`},wr),Ge.push(0,1,void 0,1,null,1,!0,1,!1,1),s.count_emval_handles=Je;var br,Cr={K:(e,r,t)=>{throw new q(e).init(r,t),e},G:()=>{D("")},s:e=>{var r=N[e];delete N[e];var t=r.rawConstructor,n=r.rawDestructor,a=r.fields,o=a.map((e=>e.getterReturnType)).concat(a.map((e=>e.setterArgumentType)));ee([e],o,(e=>{var o={};return a.forEach(((r,t)=>{var n=r.fieldName,s=e[t],i=r.getter,u=r.getterContext,l=e[t+a.length],c=r.setter,p=r.setterContext;o[n]={read:e=>s.fromWireType(i(u,e)),write:(e,r)=>{var t=[];c(p,e,l.toWireType(t,r)),z(t)}}})),[{name:r.name,fromWireType:e=>{var r={};for(var t in o)r[t]=o[t].read(e);return n(e),r},toWireType:(e,r)=>{for(var a in o)if(!(a in r))throw new TypeError(`Missing field: "${a}"`);var s=t();for(a in o)o[a].write(s,r[a]);return null!==e&&e.push(n,s),s},argPackAdvance:oe,readValueFromPointer:L,destructorFunction:n}]}))},C:(e,r,t,n,a)=>{},I:(e,r,t,n)=>{ne(e,{name:r=re(r),fromWireType:function(e){return!!e},toWireType:function(e,r){return r?t:n},argPackAdvance:oe,readValueFromPointer:function(e){return this.fromWireType(w[e])},destructorFunction:null})},w:(e,r,t,n,a,o,s,i,u,l,c,p,d)=>{c=re(c),o=Ve(a,o),i&&=Ve(s,i),l&&=Ve(u,l),d=Ve(p,d);var h=(e=>{if(void 0===e)return"_unknown";var r=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return r>=48&&r<=57?`_${e}`:e})(c);Ae(h,(function(){He(`Cannot construct ${c} due to unbound types`,[n])})),ee([e,r,t],n?[n]:[],(r=>{var t,a;r=r[0],a=n?(t=r.registeredClass).instancePrototype:be.prototype;var s=Ce(c,(function(...e){if(Object.getPrototypeOf(this)!==u)throw new J("Use 'new' to construct "+c);if(void 0===p.constructor_body)throw new J(c+" has no accessible constructor");var r=p.constructor_body[e.length];if(void 0===r)throw new J(`Tried to invoke ctor of ${c} with invalid number of parameters (${e.length}) - expected (${Object.keys(p.constructor_body).toString()}) parameters instead!`);return r.apply(this,e)})),u=Object.create(a,{constructor:{value:s}});s.prototype=u;var p=new We(c,s,u,d,t,o,i,l);p.baseClass&&(p.baseClass.__derivedClasses??=[],p.baseClass.__derivedClasses.push(p));var f=new Ee(c,p,!0,!1,!1),v=new Ee(c+"*",p,!1,!1,!1),y=new Ee(c+" const*",p,!1,!0,!1);return pe[e]={pointerType:v,constPointerType:y},Re(h,s),[f,v,y]}))},v:(e,r,t,n,a,o)=>{var s=Be(r,t);a=Ve(n,a),ee([],[e],(e=>{var t=`constructor ${(e=e[0]).name}`;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[r-1])throw new J(`Cannot register multiple constructors with identical number of parameters (${r-1}) for class '${e.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return e.registeredClass.constructor_body[r-1]=()=>{He(`Cannot construct ${e.name} due to unbound types`,s)},ee([],s,(n=>(n.splice(1,0,null),e.registeredClass.constructor_body[r-1]=Ne(t,n,null,a,o),[]))),[]}))},d:(e,r,t,n,a,o,s,i,u)=>{var l=Be(t,n);r=re(r),r=ze(r),o=Ve(a,o),ee([],[e],(e=>{var n=`${(e=e[0]).name}.${r}`;function a(){He(`Cannot call ${n} due to unbound types`,l)}r.startsWith("@@")&&(r=Symbol[r.substring(2)]),i&&e.registeredClass.pureVirtualFunctions.push(r);var c=e.registeredClass.instancePrototype,p=c[r];return void 0===p||void 0===p.overloadTable&&p.className!==e.name&&p.argCount===t-2?(a.argCount=t-2,a.className=e.name,c[r]=a):(Pe(c,r,n),c[r].overloadTable[t-2]=a),ee([],l,(a=>{var i=Ne(n,a,e,o,s,u);return void 0===c[r].overloadTable?(i.argCount=t-2,c[r]=i):c[r].overloadTable[t-2]=i,[]})),[]}))},m:(e,r,t)=>{e=re(e),ee([],[r],(r=>(r=r[0],s[e]=r.fromWireType(t),[])))},H:e=>ne(e,Qe),o:(e,r,t,n)=>{function a(){}r=re(r),a.values={},ne(e,{name:r,constructor:a,fromWireType:function(e){return this.constructor.values[e]},toWireType:(e,r)=>r.value,argPackAdvance:oe,readValueFromPointer:Ze(r,t,n),destructorFunction:null}),Ae(r,a)},a:(e,r,t)=>{var n=Ye(e,"enum");r=re(r);var a=n.constructor,o=Object.create(n.constructor.prototype,{value:{value:t},constructor:{value:Ce(`${n.name}_${r}`,(function(){}))}});a.values[t]=o,a[r]=o},A:(e,r,t)=>{ne(e,{name:r=re(r),fromWireType:e=>e,toWireType:(e,r)=>r,argPackAdvance:oe,readValueFromPointer:rr(r,t),destructorFunction:null})},i:(e,r,t,n,a,o,s)=>{var i=Be(r,t);e=re(e),e=ze(e),a=Ve(n,a),Ae(e,(function(){He(`Cannot call ${e} due to unbound types`,i)}),r-1),ee([],i,(t=>{var n=[t[0],null].concat(t.slice(1));return Re(e,Ne(e,n,null,a,o,s),r-1),[]}))},l:(e,r,t,n,a)=>{r=re(r),-1===a&&(a=4294967295);var o=e=>e;if(0===n){var s=32-8*t;o=e=>e<<s>>>s}var i=r.includes("unsigned");ne(e,{name:r,fromWireType:o,toWireType:i?function(e,r){return this.name,r>>>0}:function(e,r){return this.name,r},argPackAdvance:oe,readValueFromPointer:tr(r,t,0!==n),destructorFunction:null})},f:(e,r,t)=>{var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][r];function a(e){var r=P[e>>2],t=P[e+4>>2];return new n($.buffer,t,r)}ne(e,{name:t=re(t),fromWireType:a,argPackAdvance:oe,readValueFromPointer:a},{ignoreDuplicateRegistrations:!0})},z:(e,r)=>{var t="std::string"===(r=re(r));ne(e,{name:r,fromWireType(e){var r,n,a,o=P[e>>2],s=e+4;if(t)for(var i=s,u=0;u<=o;++u){var l=s+u;if(u==o||0==w[l]){var c=(a=l-i,(n=i)?ar(w,n,a):"");void 0===r?r=c:(r+=String.fromCharCode(0),r+=c),i=l+1}}else{var p=new Array(o);for(u=0;u<o;++u)p[u]=String.fromCharCode(w[s+u]);r=p.join("")}return _r(e),r},toWireType(e,r){var n;r instanceof ArrayBuffer&&(r=new Uint8Array(r));var a="string"==typeof r;a||r instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Int8Array||te("Cannot pass non-string to std::string"),n=t&&a?(e=>{for(var r=0,t=0;t<e.length;++t){var n=e.charCodeAt(t);n<=127?r++:n<=2047?r+=2:n>=55296&&n<=57343?(r+=4,++t):r+=3}return r})(r):r.length;var o=Wr(4+n+1),s=o+4;if(P[o>>2]=n,t&&a)((e,r,t,n)=>{if(!(n>0))return 0;for(var a=t,o=t+n-1,s=0;s<e.length;++s){var i=e.charCodeAt(s);if(i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++s)),i<=127){if(t>=o)break;r[t++]=i}else if(i<=2047){if(t+1>=o)break;r[t++]=192|i>>6,r[t++]=128|63&i}else if(i<=65535){if(t+2>=o)break;r[t++]=224|i>>12,r[t++]=128|i>>6&63,r[t++]=128|63&i}else{if(t+3>=o)break;r[t++]=240|i>>18,r[t++]=128|i>>12&63,r[t++]=128|i>>6&63,r[t++]=128|63&i}}r[t]=0})(r,w,s,n+1);else if(a)for(var i=0;i<n;++i){var u=r.charCodeAt(i);u>255&&(_r(s),te("String has UTF-16 code units that do not fit in 8 bits")),w[s+i]=u}else for(i=0;i<n;++i)w[s+i]=r[i];return null!==e&&e.push(_r,o),o},argPackAdvance:oe,readValueFromPointer:L,destructorFunction(e){_r(e)}})},u:(e,r,t)=>{var n,a,o,s;t=re(t),2===r?(n=sr,a=ir,s=ur,o=e=>b[e>>1]):4===r&&(n=lr,a=cr,s=pr,o=e=>P[e>>2]),ne(e,{name:t,fromWireType:e=>{for(var t,a=P[e>>2],s=e+4,i=0;i<=a;++i){var u=e+4+i*r;if(i==a||0==o(u)){var l=n(s,u-s);void 0===t?t=l:(t+=String.fromCharCode(0),t+=l),s=u+r}}return _r(e),t},toWireType:(e,n)=>{"string"!=typeof n&&te(`Cannot pass non-string to C++ string type ${t}`);var o=s(n),i=Wr(4+o+r);return P[i>>2]=o/r,a(n,i+4,o+r),null!==e&&e.push(_r,i),i},argPackAdvance:oe,readValueFromPointer:L,destructorFunction(e){_r(e)}})},t:(e,r,t,n,a,o)=>{N[e]={name:re(r),rawConstructor:Ve(t,n),rawDestructor:Ve(a,o),fields:[]}},c:(e,r,t,n,a,o,s,i,u,l)=>{N[e].fields.push({fieldName:re(r),getterReturnType:t,getter:Ve(n,a),getterContext:o,setterArgumentType:s,setter:Ve(i,u),setterContext:l})},J:(e,r)=>{ne(e,{isVoid:!0,name:r=re(r),argPackAdvance:0,fromWireType:()=>{},toWireType:(e,r)=>{}})},F:(e,r,t)=>w.copyWithin(e,r,r+t),n:(e,r,t)=>(e=Ke.toValue(e),r=Ye(r,"emval::as"),dr(r,t,e)),q:(e,r,t,n)=>(e=hr[e])(null,r=Ke.toValue(r),t,n),p:(e,r,t,n,a)=>(e=hr[e])(r=Ke.toValue(r),r[t=vr(t)],n,a),b:Xe,x:e=>0===e?Ke.toHandle(yr()):(e=vr(e),Ke.toHandle(yr()[e])),j:(e,r,t)=>{var n=((e,r)=>{for(var t=new Array(e),n=0;n<e;++n)t[n]=Ye(P[r+4*n>>2],"parameter "+n);return t})(e,r),a=n.shift();e--;var o="return function (obj, func, destructorsRef, args) {\n",s=0,i=[];0===t&&i.push("obj");for(var u=["retType"],l=[a],c=0;c<e;++c)i.push("arg"+c),u.push("argType"+c),l.push(n[c]),o+=`  var arg${c} = argType${c}.readValueFromPointer(args${s?"+"+s:""});\n`,s+=n[c].argPackAdvance;o+=`  var rv = ${1===t?"new func":"func.call"}(${i.join(", ")});\n`,a.isVoid||(u.push("emval_returnValue"),l.push(dr),o+="  return emval_returnValue(retType, destructorsRef, rv);\n"),o+="};\n",u.push(o);var p,d,h=qe(Function,u)(...l),f=`methodCaller<(${n.map((e=>e.name)).join(", ")}) => ${a.name}>`;return p=Ce(f,h),d=hr.length,hr.push(p),d},r:e=>(e=vr(e),Ke.toHandle(s[e])),g:(e,r)=>(e=Ke.toValue(e),r=Ke.toValue(r),Ke.toHandle(e[r])),k:e=>{e>9&&(Ge[e+1]+=1)},h:e=>Ke.toHandle(vr(e)),e:e=>{var r=Ke.toValue(e);z(r),Xe(e)},D:e=>{var r=w.length,t=2147483648;if((e>>>=0)>t)return!1;for(var n,a,o=1;o<=4;o*=2){var s=r*(1+.2/o);s=Math.min(s,e+100663296);var i=Math.min(t,(n=Math.max(e,s))+((a=65536)-n%a)%a);if(mr(i))return!0}return!1},E:e=>52,B:function(e,r,t,n,a){return t,r,70},y:(e,r,t,n)=>{for(var a,o,s,i=0,u=0;u<t;u++){var l=P[r>>2],c=P[r+4>>2];r+=8;for(var p=0;p<c;p++)a=e,o=w[l+p],s=void 0,s=Tr[a],0===o||10===o?((1===a?m:g)(ar(s,0)),s.length=0):s.push(o);i+=c}return P[n>>2]=i,0}},Pr=function(){var e,r,t,a,o={a:Cr};function i(e,r){var t;return Pr=e.exports,y=Pr.L,S(),ke=Pr.P,t=Pr.M,j.unshift(t),function(e){if(k--,s.monitorRunDependencies?.(k),0==k&&(null!==O&&(clearInterval(O),O=null),R)){var r=R;R=null,r()}}(),Pr}if(k++,s.monitorRunDependencies?.(k),s.instantiateWasm)try{return s.instantiateWasm(o,i)}catch(e){g(`Module.instantiateWasm callback failed with error: ${e}`),n(e)}return x||(x=U()),(e=v,r=x,t=o,a=function(e){i(e.instance)},e||"function"!=typeof WebAssembly.instantiateStreaming||I(r)||V(r)||c||"function"!=typeof fetch?B(r,t,a):fetch(r,{credentials:"same-origin"}).then((e=>WebAssembly.instantiateStreaming(e,t).then(a,(function(e){return g(`wasm streaming compile failed: ${e}`),g("falling back to ArrayBuffer instantiation"),B(r,t,a)}))))).catch(n),{}}(),Ar=e=>(Ar=Pr.N)(e),Wr=e=>(Wr=Pr.O)(e),_r=e=>(_r=Pr.Q)(e),Sr=e=>(Sr=Pr.R)(e);s.dynCall_jiji=(e,r,t,n,a)=>(s.dynCall_jiji=Pr.S)(e,r,t,n,a);function Fr(){function e(){br||(br=!0,s.calledRun=!0,_||(!0,M(j),t(s),s.onRuntimeInitialized?.(),function(){if(s.postRun)for("function"==typeof s.postRun&&(s.postRun=[s.postRun]);s.postRun.length;)e=s.postRun.shift(),E.unshift(e);var e;M(E)}()))}k>0||(!function(){if(s.preRun)for("function"==typeof s.preRun&&(s.preRun=[s.preRun]);s.preRun.length;)e=s.preRun.shift(),F.unshift(e);var e;M(F)}(),k>0||(s.setStatus?(s.setStatus("Running..."),setTimeout((function(){setTimeout((function(){s.setStatus("")}),1),e()}),1)):e()))}if(R=function e(){br||Fr(),br||(R=e)},s.preInit)for("function"==typeof s.preInit&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.pop()();return Fr(),i}})();"object"==typeof exports&&"object"==typeof module?module.exports=BASIS:"function"==typeof define&&define.amd&&define([],(()=>BASIS));
//# sourceMappingURL=basis_transcoder.js.map