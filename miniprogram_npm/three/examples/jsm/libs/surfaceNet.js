let surfaceNet=(r,a,f)=>{var o=new Int32Array(24),v=new Int32Array(256);!function(){for(var r=0,a=0;a<8;++a)for(var f=1;f<=4;f<<=1){var e=a^f;a<=e&&(o[r++]=a,o[r++]=e)}for(a=0;a<256;++a){var n=0;for(f=0;f<24;f+=2){n|=!!(a&1<<o[f])!==!!(a&1<<o[f+1])?1<<(f>>1):0}v[a]=n}}();var e=new Array(4096);!function(){for(var r=0;r<e.length;++r)e[r]=0}(),f||(f=[[0,0,0],r]);for(var n=[0,0,0],t=[0,0,0],h=0;h<3;++h)n[h]=(f[1][h]-f[0][h])/r[h],t[h]=f[0][h];var s=[],i=[],u=[0,0,0],l=[1,r[0]+1,(r[0]+1)*(r[1]+1)],p=[0,0,0,0,0,0,0,0],g=1;if(2*l[2]>e.length){var c=e.length;for(e.length=2*l[2];c<e.length;)e[c++]=0}for(u[2]=0;u[2]<r[2]-1;++u[2],r[0],g^=1,l[2]=-l[2]){var w=1+(r[0]+1)*(1+g*(r[1]+1));for(u[1]=0;u[1]<r[1]-1;++u[1],w+=2)for(u[0]=0;u[0]<r[0]-1;++u[0],++w){for(var y=0,A=0,I=0;I<2;++I)for(var N=0;N<2;++N)for(h=0;h<2;++h,++A){var b=a(n[0]*(u[0]+h)+t[0],n[1]*(u[1]+N)+t[1],n[2]*(u[2]+I)+t[2]);p[A]=b,y|=b<0?1<<A:0}if(0!==y&&255!==y){var x=v[y],M=[0,0,0],d=0;for(h=0;h<12;++h)if(x&1<<h){++d;var j=o[h<<1],k=o[1+(h<<1)],m=p[j],q=m-p[k];if(Math.abs(q)>1e-6){q=m/q;for(N=0,I=1;N<3;++N,I<<=1){var z=j&I,B=k&I;M[N]+=z!==B?z?1-q:q:z?1:0}}}var C=1/d;for(h=0;h<3;++h)M[h]=n[h]*(u[h]+C*M[h])+t[h];e[w]=s.length,s.push(M);for(h=0;h<3;++h)if(x&1<<h){var D=(h+1)%3,E=(h+2)%3;if(0!==u[D]&&0!==u[E]){var F=l[D],G=l[E];1&y?(i.push([e[w],e[w-F],e[w-G]]),i.push([e[w-G],e[w-F],e[w-F-G]])):(i.push([e[w],e[w-G],e[w-F]]),i.push([e[w-F],e[w-G],e[w-F-G]]))}}}}}return{positions:s,cells:i}};export{surfaceNet};
//# sourceMappingURL=surfaceNet.js.map