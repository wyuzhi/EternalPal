import{ColorManagement,RawShaderMaterial,UniformsUtils,LinearToneMapping,ReinhardToneMapping,CineonToneMapping,AgXToneMapping,ACESFilmicToneMapping,NeutralToneMapping,CustomToneMapping,SRGBTransfer}from"three";import{Pass,FullScreenQuad}from"./Pass.js";import{OutputShader}from"../shaders/OutputShader.js";class OutputPass extends Pass{constructor(){super(),this.uniforms=UniformsUtils.clone(OutputShader.uniforms),this.material=new RawShaderMaterial({name:OutputShader.name,uniforms:this.uniforms,vertexShader:OutputShader.vertexShader,fragmentShader:OutputShader.fragmentShader}),this._fsQuad=new FullScreenQuad(this.material),this._outputColorSpace=null,this._toneMapping=null}render(e,t,a){this.uniforms.tDiffuse.value=a.texture,this.uniforms.toneMappingExposure.value=e.toneMappingExposure,this._outputColorSpace===e.outputColorSpace&&this._toneMapping===e.toneMapping||(this._outputColorSpace=e.outputColorSpace,this._toneMapping=e.toneMapping,this.material.defines={},ColorManagement.getTransfer(this._outputColorSpace)===SRGBTransfer&&(this.material.defines.SRGB_TRANSFER=""),this._toneMapping===LinearToneMapping?this.material.defines.LINEAR_TONE_MAPPING="":this._toneMapping===ReinhardToneMapping?this.material.defines.REINHARD_TONE_MAPPING="":this._toneMapping===CineonToneMapping?this.material.defines.CINEON_TONE_MAPPING="":this._toneMapping===ACESFilmicToneMapping?this.material.defines.ACES_FILMIC_TONE_MAPPING="":this._toneMapping===AgXToneMapping?this.material.defines.AGX_TONE_MAPPING="":this._toneMapping===NeutralToneMapping?this.material.defines.NEUTRAL_TONE_MAPPING="":this._toneMapping===CustomToneMapping&&(this.material.defines.CUSTOM_TONE_MAPPING=""),this.material.needsUpdate=!0),!0===this.renderToScreen?(e.setRenderTarget(null),this._fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this._fsQuad.render(e))}dispose(){this.material.dispose(),this._fsQuad.dispose()}}export{OutputPass};
//# sourceMappingURL=OutputPass.js.map