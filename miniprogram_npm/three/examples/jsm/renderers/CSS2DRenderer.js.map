{"version":3,"file":"node_modules/three/examples/jsm/renderers/CSS2DRenderer.js","names":["Matrix4","Object3D","Vector2","Vector3","CSS2DObject","constructor","element","document","createElement","super","this","isCSS2DObject","style","position","userSelect","setAttribute","center","addEventListener","traverse","object","ownerDocument","defaultView","Element","parentNode","remove","copy","source","recursive","cloneNode","_vector","_viewMatrix","_viewProjectionMatrix","_a","_b","CSS2DRenderer","parameters","_this","_width","_height","_widthHalf","_heightHalf","cache","objects","WeakMap","domElement","undefined","hideObject","display","i","l","children","length","renderObject","scene","camera","visible","setFromMatrixPosition","matrixWorld","applyMatrix4","z","layers","test","onBeforeRender","transform","x","y","appendChild","onAfterRender","objectData","distanceToCameraSquared","getDistanceToSquared","set","object1","object2","distanceToSquared","overflow","getSize","width","height","render","matrixWorldAutoUpdate","updateMatrixWorld","parent","matrixWorldInverse","multiplyMatrices","projectionMatrix","sorted","result","traverseVisible","push","filterAndFlatten","sort","a","b","renderOrder","get","zMax","zIndex","zOrder","setSize"],"sources":["node_modules/three/examples/jsm/renderers/CSS2DRenderer.js"],"sourcesContent":["import {\n\tMatrix4,\n\tObject3D,\n\tVector2,\n\tVector3\n} from 'three';\n\n/**\n * The only type of 3D object that is supported by {@link CSS2DRenderer}.\n *\n * @augments Object3D\n * @three_import import { CSS2DObject } from 'three/addons/renderers/CSS2DRenderer.js';\n */\nclass CSS2DObject extends Object3D {\n\n\t/**\n\t * Constructs a new CSS2D object.\n\t *\n\t * @param {DOMElement} [element] - The DOM element.\n\t */\n\tconstructor( element = document.createElement( 'div' ) ) {\n\n\t\tsuper();\n\n\t\t/**\n\t\t * This flag can be used for type testing.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @readonly\n\t\t * @default true\n\t\t */\n\t\tthis.isCSS2DObject = true;\n\n\t\t/**\n\t\t * The DOM element which defines the appearance of this 3D object.\n\t\t *\n\t\t * @type {DOMElement}\n\t\t * @readonly\n\t\t * @default true\n\t\t */\n\t\tthis.element = element;\n\n\t\tthis.element.style.position = 'absolute';\n\t\tthis.element.style.userSelect = 'none';\n\n\t\tthis.element.setAttribute( 'draggable', false );\n\n\t\t/**\n\t\t * The 3D objects center point.\n\t\t * `( 0, 0 )` is the lower left, `( 1, 1 )` is the top right.\n\t\t *\n\t\t * @type {Vector2}\n\t\t * @default (0.5,0.5)\n\t\t */\n\t\tthis.center = new Vector2( 0.5, 0.5 );\n\n\t\tthis.addEventListener( 'removed', function () {\n\n\t\t\tthis.traverse( function ( object ) {\n\n\t\t\t\tif (\n\t\t\t\t\tobject.element instanceof object.element.ownerDocument.defaultView.Element &&\n\t\t\t\t\tobject.element.parentNode !== null\n\t\t\t\t) {\n\n\t\t\t\t\tobject.element.remove();\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.element = source.element.cloneNode( true );\n\n\t\tthis.center = source.center;\n\n\t\treturn this;\n\n\t}\n\n}\n\n//\n\nconst _vector = new Vector3();\nconst _viewMatrix = new Matrix4();\nconst _viewProjectionMatrix = new Matrix4();\nconst _a = new Vector3();\nconst _b = new Vector3();\n\n/**\n * This renderer is a simplified version of {@link CSS3DRenderer}. The only transformation that is\n * supported is translation.\n *\n * The renderer is very useful if you want to combine HTML based labels with 3D objects. Here too,\n * the respective DOM elements are wrapped into an instance of {@link CSS2DObject} and added to the\n * scene graph. All other types of renderable 3D objects (like meshes or point clouds) are ignored.\n *\n * `CSS2DRenderer` only supports 100% browser and display zoom.\n *\n * @three_import import { CSS2DRenderer } from 'three/addons/renderers/CSS2DRenderer.js';\n */\nclass CSS2DRenderer {\n\n\t/**\n\t * Constructs a new CSS2D renderer.\n\t *\n\t * @param {CSS2DRenderer~Parameters} [parameters] - The parameters.\n\t */\n\tconstructor( parameters = {} ) {\n\n\t\tconst _this = this;\n\n\t\tlet _width, _height;\n\t\tlet _widthHalf, _heightHalf;\n\n\t\tconst cache = {\n\t\t\tobjects: new WeakMap()\n\t\t};\n\n\t\tconst domElement = parameters.element !== undefined ? parameters.element : document.createElement( 'div' );\n\n\t\tdomElement.style.overflow = 'hidden';\n\n\t\t/**\n\t\t * The DOM where the renderer appends its child-elements.\n\t\t *\n\t\t * @type {DOMElement}\n\t\t */\n\t\tthis.domElement = domElement;\n\n\t\t/**\n\t\t * Returns an object containing the width and height of the renderer.\n\t\t *\n\t\t * @return {{width:number,height:number}} The size of the renderer.\n\t\t */\n\t\tthis.getSize = function () {\n\n\t\t\treturn {\n\t\t\t\twidth: _width,\n\t\t\t\theight: _height\n\t\t\t};\n\n\t\t};\n\n\t\t/**\n\t\t * Renders the given scene using the given camera.\n\t\t *\n\t\t * @param {Object3D} scene - A scene or any other type of 3D object.\n\t\t * @param {Camera} camera - The camera.\n\t\t */\n\t\tthis.render = function ( scene, camera ) {\n\n\t\t\tif ( scene.matrixWorldAutoUpdate === true ) scene.updateMatrixWorld();\n\t\t\tif ( camera.parent === null && camera.matrixWorldAutoUpdate === true ) camera.updateMatrixWorld();\n\n\t\t\t_viewMatrix.copy( camera.matrixWorldInverse );\n\t\t\t_viewProjectionMatrix.multiplyMatrices( camera.projectionMatrix, _viewMatrix );\n\n\t\t\trenderObject( scene, scene, camera );\n\t\t\tzOrder( scene );\n\n\t\t};\n\n\t\t/**\n\t\t * Resizes the renderer to the given width and height.\n\t\t *\n\t\t * @param {number} width - The width of the renderer.\n\t\t * @param {number} height - The height of the renderer.\n\t\t */\n\t\tthis.setSize = function ( width, height ) {\n\n\t\t\t_width = width;\n\t\t\t_height = height;\n\n\t\t\t_widthHalf = _width / 2;\n\t\t\t_heightHalf = _height / 2;\n\n\t\t\tdomElement.style.width = width + 'px';\n\t\t\tdomElement.style.height = height + 'px';\n\n\t\t};\n\n\t\tfunction hideObject( object ) {\n\n\t\t\tif ( object.isCSS2DObject ) object.element.style.display = 'none';\n\n\t\t\tfor ( let i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\t\thideObject( object.children[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction renderObject( object, scene, camera ) {\n\n\t\t\tif ( object.visible === false ) {\n\n\t\t\t\thideObject( object );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( object.isCSS2DObject ) {\n\n\t\t\t\t_vector.setFromMatrixPosition( object.matrixWorld );\n\t\t\t\t_vector.applyMatrix4( _viewProjectionMatrix );\n\n\t\t\t\tconst visible = ( _vector.z >= - 1 && _vector.z <= 1 ) && ( object.layers.test( camera.layers ) === true );\n\n\t\t\t\tconst element = object.element;\n\t\t\t\telement.style.display = visible === true ? '' : 'none';\n\n\t\t\t\tif ( visible === true ) {\n\n\t\t\t\t\tobject.onBeforeRender( _this, scene, camera );\n\n\t\t\t\t\telement.style.transform = 'translate(' + ( - 100 * object.center.x ) + '%,' + ( - 100 * object.center.y ) + '%)' + 'translate(' + ( _vector.x * _widthHalf + _widthHalf ) + 'px,' + ( - _vector.y * _heightHalf + _heightHalf ) + 'px)';\n\n\t\t\t\t\tif ( element.parentNode !== domElement ) {\n\n\t\t\t\t\t\tdomElement.appendChild( element );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject.onAfterRender( _this, scene, camera );\n\n\t\t\t\t}\n\n\t\t\t\tconst objectData = {\n\t\t\t\t\tdistanceToCameraSquared: getDistanceToSquared( camera, object )\n\t\t\t\t};\n\n\t\t\t\tcache.objects.set( object, objectData );\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\t\trenderObject( object.children[ i ], scene, camera );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction getDistanceToSquared( object1, object2 ) {\n\n\t\t\t_a.setFromMatrixPosition( object1.matrixWorld );\n\t\t\t_b.setFromMatrixPosition( object2.matrixWorld );\n\n\t\t\treturn _a.distanceToSquared( _b );\n\n\t\t}\n\n\t\tfunction filterAndFlatten( scene ) {\n\n\t\t\tconst result = [];\n\n\t\t\tscene.traverseVisible( function ( object ) {\n\n\t\t\t\tif ( object.isCSS2DObject ) result.push( object );\n\n\t\t\t} );\n\n\t\t\treturn result;\n\n\t\t}\n\n\t\tfunction zOrder( scene ) {\n\n\t\t\tconst sorted = filterAndFlatten( scene ).sort( function ( a, b ) {\n\n\t\t\t\tif ( a.renderOrder !== b.renderOrder ) {\n\n\t\t\t\t\treturn b.renderOrder - a.renderOrder;\n\n\t\t\t\t}\n\n\t\t\t\tconst distanceA = cache.objects.get( a ).distanceToCameraSquared;\n\t\t\t\tconst distanceB = cache.objects.get( b ).distanceToCameraSquared;\n\n\t\t\t\treturn distanceA - distanceB;\n\n\t\t\t} );\n\n\t\t\tconst zMax = sorted.length;\n\n\t\t\tfor ( let i = 0, l = sorted.length; i < l; i ++ ) {\n\n\t\t\t\tsorted[ i ].element.style.zIndex = zMax - i;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Constructor parameters of `CSS2DRenderer`.\n *\n * @typedef {Object} CSS2DRenderer~Parameters\n * @property {DOMElement} [element] - A DOM element where the renderer appends its child-elements.\n * If not passed in here, a new div element will be created.\n **/\n\nexport { CSS2DObject, CSS2DRenderer };\n"],"mappings":"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","ignoreList":[]}