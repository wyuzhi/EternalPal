import{Matrix3,NodeMaterial}from"three/webgpu";import{clamp,nodeObject,Fn,vec4,uv,uniform,max}from"three/tsl";import StereoCompositePassNode from"./StereoCompositePassNode.js";class AnaglyphPassNode extends StereoCompositePassNode{static get type(){return"AnaglyphPassNode"}constructor(e,t){super(e,t),this.isAnaglyphPassNode=!0,this._colorMatrixLeft=uniform((new Matrix3).fromArray([.4561,-.0400822,-.0152161,.500484,-.0378246,-.0205971,.176381,-.0157589,-.00546856])),this._colorMatrixRight=uniform((new Matrix3).fromArray([-.0434706,.378476,-.0721527,-.0879388,.73364,-.112961,-.00155529,-.0184503,1.2264]))}setup(e){const t=uv(),a=Fn((()=>{const e=this._mapLeft.sample(t),a=this._mapRight.sample(t),r=clamp(this._colorMatrixLeft.mul(e.rgb).add(this._colorMatrixRight.mul(a.rgb)));return vec4(r.rgb,max(e.a,a.a))})),r=this._material||(this._material=new NodeMaterial);return r.fragmentNode=a().context(e.getSharedContext()),r.name="Anaglyph",r.needsUpdate=!0,super.setup(e)}}export default AnaglyphPassNode;export const anaglyphPass=(e,t)=>nodeObject(new AnaglyphPassNode(e,t));
//# sourceMappingURL=AnaglyphPassNode.js.map