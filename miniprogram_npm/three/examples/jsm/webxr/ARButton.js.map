{"version":3,"file":"node_modules/three/examples/jsm/webxr/ARButton.js","names":["ARButton","createButton","renderer","sessionInit","button","document","createElement","disableButton","style","display","cursor","left","width","onmouseenter","onmouseleave","onclick","stylizeElement","element","position","bottom","padding","border","borderRadius","background","color","font","textAlign","opacity","outline","zIndex","navigator","id","xr","isSessionSupported","then","supported","undefined","domOverlay","overlay","body","appendChild","svg","createElementNS","setAttribute","right","top","addEventListener","currentSession","end","path","optionalFeatures","push","root","async","onSessionStarted","session","onSessionEnded","setReferenceSpaceType","setSession","textContent","removeEventListener","requestSession","offerSession","catch","err","console","warn","showStartAR","exception","message","window","isSecureContext","href","location","replace","innerHTML","textDecoration"],"sources":["node_modules/three/examples/jsm/webxr/ARButton.js"],"sourcesContent":["/**\n * A utility class for creating a button that allows to initiate\n * immersive AR sessions based on WebXR. The button can be created\n * with a factory method and then appended ot the website's DOM.\n *\n * ```js\n * document.body.appendChild( ARButton.createButton( renderer ) );\n * ```\n *\n * @hideconstructor\n * @three_import import { ARButton } from 'three/addons/webxr/ARButton.js';\n */\nclass ARButton {\n\n\t/**\n\t * Constructs a new AR button.\n\t *\n\t * @param {WebGLRenderer|WebGPURenderer} renderer - The renderer.\n\t * @param {XRSessionInit} [sessionInit] - The a configuration object for the AR session.\n\t * @return {HTMLElement} The button or an error message if `immersive-ar` isn't supported.\n\t */\n\tstatic createButton( renderer, sessionInit = {} ) {\n\n\t\tconst button = document.createElement( 'button' );\n\n\t\tfunction showStartAR( /*device*/ ) {\n\n\t\t\tif ( sessionInit.domOverlay === undefined ) {\n\n\t\t\t\tconst overlay = document.createElement( 'div' );\n\t\t\t\toverlay.style.display = 'none';\n\t\t\t\tdocument.body.appendChild( overlay );\n\n\t\t\t\tconst svg = document.createElementNS( 'http://www.w3.org/2000/svg', 'svg' );\n\t\t\t\tsvg.setAttribute( 'width', 38 );\n\t\t\t\tsvg.setAttribute( 'height', 38 );\n\t\t\t\tsvg.style.position = 'absolute';\n\t\t\t\tsvg.style.right = '20px';\n\t\t\t\tsvg.style.top = '20px';\n\t\t\t\tsvg.addEventListener( 'click', function () {\n\n\t\t\t\t\tcurrentSession.end();\n\n\t\t\t\t} );\n\t\t\t\toverlay.appendChild( svg );\n\n\t\t\t\tconst path = document.createElementNS( 'http://www.w3.org/2000/svg', 'path' );\n\t\t\t\tpath.setAttribute( 'd', 'M 12,12 L 28,28 M 28,12 12,28' );\n\t\t\t\tpath.setAttribute( 'stroke', '#fff' );\n\t\t\t\tpath.setAttribute( 'stroke-width', 2 );\n\t\t\t\tsvg.appendChild( path );\n\n\t\t\t\tif ( sessionInit.optionalFeatures === undefined ) {\n\n\t\t\t\t\tsessionInit.optionalFeatures = [];\n\n\t\t\t\t}\n\n\t\t\t\tsessionInit.optionalFeatures.push( 'dom-overlay' );\n\t\t\t\tsessionInit.domOverlay = { root: overlay };\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tlet currentSession = null;\n\n\t\t\tasync function onSessionStarted( session ) {\n\n\t\t\t\tsession.addEventListener( 'end', onSessionEnded );\n\n\t\t\t\trenderer.xr.setReferenceSpaceType( 'local' );\n\n\t\t\t\tawait renderer.xr.setSession( session );\n\n\t\t\t\tbutton.textContent = 'STOP AR';\n\t\t\t\tsessionInit.domOverlay.root.style.display = '';\n\n\t\t\t\tcurrentSession = session;\n\n\t\t\t}\n\n\t\t\tfunction onSessionEnded( /*event*/ ) {\n\n\t\t\t\tcurrentSession.removeEventListener( 'end', onSessionEnded );\n\n\t\t\t\tbutton.textContent = 'START AR';\n\t\t\t\tsessionInit.domOverlay.root.style.display = 'none';\n\n\t\t\t\tcurrentSession = null;\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'pointer';\n\t\t\tbutton.style.left = 'calc(50% - 50px)';\n\t\t\tbutton.style.width = '100px';\n\n\t\t\tbutton.textContent = 'START AR';\n\n\t\t\tbutton.onmouseenter = function () {\n\n\t\t\t\tbutton.style.opacity = '1.0';\n\n\t\t\t};\n\n\t\t\tbutton.onmouseleave = function () {\n\n\t\t\t\tbutton.style.opacity = '0.5';\n\n\t\t\t};\n\n\t\t\tbutton.onclick = function () {\n\n\t\t\t\tif ( currentSession === null ) {\n\n\t\t\t\t\tnavigator.xr.requestSession( 'immersive-ar', sessionInit ).then( onSessionStarted );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcurrentSession.end();\n\n\t\t\t\t\tif ( navigator.xr.offerSession !== undefined ) {\n\n\t\t\t\t\t\tnavigator.xr.offerSession( 'immersive-ar', sessionInit )\n\t\t\t\t\t\t\t.then( onSessionStarted )\n\t\t\t\t\t\t\t.catch( ( err ) => {\n\n\t\t\t\t\t\t\t\tconsole.warn( err );\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tif ( navigator.xr.offerSession !== undefined ) {\n\n\t\t\t\tnavigator.xr.offerSession( 'immersive-ar', sessionInit )\n\t\t\t\t\t.then( onSessionStarted )\n\t\t\t\t\t.catch( ( err ) => {\n\n\t\t\t\t\t\tconsole.warn( err );\n\n\t\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction disableButton() {\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'auto';\n\t\t\tbutton.style.left = 'calc(50% - 75px)';\n\t\t\tbutton.style.width = '150px';\n\n\t\t\tbutton.onmouseenter = null;\n\t\t\tbutton.onmouseleave = null;\n\n\t\t\tbutton.onclick = null;\n\n\t\t}\n\n\t\tfunction showARNotSupported() {\n\n\t\t\tdisableButton();\n\n\t\t\tbutton.textContent = 'AR NOT SUPPORTED';\n\n\t\t}\n\n\t\tfunction showARNotAllowed( exception ) {\n\n\t\t\tdisableButton();\n\n\t\t\tconsole.warn( 'Exception when trying to call xr.isSessionSupported', exception );\n\n\t\t\tbutton.textContent = 'AR NOT ALLOWED';\n\n\t\t}\n\n\t\tfunction stylizeElement( element ) {\n\n\t\t\telement.style.position = 'absolute';\n\t\t\telement.style.bottom = '20px';\n\t\t\telement.style.padding = '12px 6px';\n\t\t\telement.style.border = '1px solid #fff';\n\t\t\telement.style.borderRadius = '4px';\n\t\t\telement.style.background = 'rgba(0,0,0,0.1)';\n\t\t\telement.style.color = '#fff';\n\t\t\telement.style.font = 'normal 13px sans-serif';\n\t\t\telement.style.textAlign = 'center';\n\t\t\telement.style.opacity = '0.5';\n\t\t\telement.style.outline = 'none';\n\t\t\telement.style.zIndex = '999';\n\n\t\t}\n\n\t\tif ( 'xr' in navigator ) {\n\n\t\t\tbutton.id = 'ARButton';\n\t\t\tbutton.style.display = 'none';\n\n\t\t\tstylizeElement( button );\n\n\t\t\tnavigator.xr.isSessionSupported( 'immersive-ar' ).then( function ( supported ) {\n\n\t\t\t\tsupported ? showStartAR() : showARNotSupported();\n\n\t\t\t} ).catch( showARNotAllowed );\n\n\t\t\treturn button;\n\n\t\t} else {\n\n\t\t\tconst message = document.createElement( 'a' );\n\n\t\t\tif ( window.isSecureContext === false ) {\n\n\t\t\t\tmessage.href = document.location.href.replace( /^http:/, 'https:' );\n\t\t\t\tmessage.innerHTML = 'WEBXR NEEDS HTTPS'; // TODO Improve message\n\n\t\t\t} else {\n\n\t\t\t\tmessage.href = 'https://immersiveweb.dev/';\n\t\t\t\tmessage.innerHTML = 'WEBXR NOT AVAILABLE';\n\n\t\t\t}\n\n\t\t\tmessage.style.left = 'calc(50% - 90px)';\n\t\t\tmessage.style.width = '180px';\n\t\t\tmessage.style.textDecoration = 'none';\n\n\t\t\tstylizeElement( message );\n\n\t\t\treturn message;\n\n\t\t}\n\n\t}\n\n}\n\nexport { ARButton };\n"],"mappings":"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","ignoreList":[]}