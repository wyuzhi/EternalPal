{"version":3,"file":"node_modules/three/examples/jsm/webxr/XRButton.js","names":["XRButton","createButton","renderer","sessionInit","button","document","createElement","showStartXR","mode","currentSession","async","onSessionStarted","session","addEventListener","onSessionEnded","xr","setSession","textContent","removeEventListener","style","display","cursor","left","width","sessionOptions","optionalFeatures","onmouseenter","opacity","onmouseleave","onclick","navigator","requestSession","then","end","undefined","offerSession","catch","err","console","warn","disableButton","showXRNotAllowed","exception","stylizeElement","element","position","bottom","padding","border","borderRadius","background","color","font","textAlign","outline","zIndex","id","isSessionSupported","supported","message","window","isSecureContext","href","location","replace","innerHTML","textDecoration"],"sources":["node_modules/three/examples/jsm/webxr/XRButton.js"],"sourcesContent":["/**\n * A utility class for creating a button that allows to initiate\n * immersive XR sessions based on WebXR. The button can be created\n * with a factory method and then appended ot the website's DOM.\n *\n * ```js\n * document.body.appendChild( XRButton.createButton( renderer ) );\n * ```\n *\n * Compared to {@link ARButton} and {@link VRButton}, this class will\n * try to offer an immersive AR session first. If the device does not\n * support this type of session, it uses an immersive VR session.\n *\n * @hideconstructor\n * @three_import import { XRButton } from 'three/addons/webxr/XRButton.js';\n */\nclass XRButton {\n\n\t/**\n\t * Constructs a new XR button.\n\t *\n\t * @param {WebGLRenderer|WebGPURenderer} renderer - The renderer.\n\t * @param {XRSessionInit} [sessionInit] - The a configuration object for the AR session.\n\t * @return {HTMLElement} The button or an error message if WebXR isn't supported.\n\t */\n\tstatic createButton( renderer, sessionInit = {} ) {\n\n\t\tconst button = document.createElement( 'button' );\n\n\t\tfunction showStartXR( mode ) {\n\n\t\t\tlet currentSession = null;\n\n\t\t\tasync function onSessionStarted( session ) {\n\n\t\t\t\tsession.addEventListener( 'end', onSessionEnded );\n\n\t\t\t\tawait renderer.xr.setSession( session );\n\n\t\t\t\tbutton.textContent = 'STOP XR';\n\n\t\t\t\tcurrentSession = session;\n\n\t\t\t}\n\n\t\t\tfunction onSessionEnded( /*event*/ ) {\n\n\t\t\t\tcurrentSession.removeEventListener( 'end', onSessionEnded );\n\n\t\t\t\tbutton.textContent = 'START XR';\n\n\t\t\t\tcurrentSession = null;\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'pointer';\n\t\t\tbutton.style.left = 'calc(50% - 50px)';\n\t\t\tbutton.style.width = '100px';\n\n\t\t\tbutton.textContent = 'START XR';\n\n\t\t\tconst sessionOptions = {\n\t\t\t\t...sessionInit,\n\t\t\t\toptionalFeatures: [\n\t\t\t\t\t'local-floor',\n\t\t\t\t\t'bounded-floor',\n\t\t\t\t\t'layers',\n\t\t\t\t\t...( sessionInit.optionalFeatures || [] )\n\t\t\t\t],\n\t\t\t};\n\n\t\t\tbutton.onmouseenter = function () {\n\n\t\t\t\tbutton.style.opacity = '1.0';\n\n\t\t\t};\n\n\t\t\tbutton.onmouseleave = function () {\n\n\t\t\t\tbutton.style.opacity = '0.5';\n\n\t\t\t};\n\n\t\t\tbutton.onclick = function () {\n\n\t\t\t\tif ( currentSession === null ) {\n\n\t\t\t\t\tnavigator.xr.requestSession( mode, sessionOptions )\n\t\t\t\t\t\t.then( onSessionStarted );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcurrentSession.end();\n\n\t\t\t\t\tif ( navigator.xr.offerSession !== undefined ) {\n\n\t\t\t\t\t\tnavigator.xr.offerSession( mode, sessionOptions )\n\t\t\t\t\t\t\t.then( onSessionStarted )\n\t\t\t\t\t\t\t.catch( ( err ) => {\n\n\t\t\t\t\t\t\t\tconsole.warn( err );\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tif ( navigator.xr.offerSession !== undefined ) {\n\n\t\t\t\tnavigator.xr.offerSession( mode, sessionOptions )\n\t\t\t\t\t.then( onSessionStarted )\n\t\t\t\t\t.catch( ( err ) => {\n\n\t\t\t\t\t\tconsole.warn( err );\n\n\t\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction disableButton() {\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'auto';\n\t\t\tbutton.style.left = 'calc(50% - 75px)';\n\t\t\tbutton.style.width = '150px';\n\n\t\t\tbutton.onmouseenter = null;\n\t\t\tbutton.onmouseleave = null;\n\n\t\t\tbutton.onclick = null;\n\n\t\t}\n\n\t\tfunction showXRNotSupported() {\n\n\t\t\tdisableButton();\n\n\t\t\tbutton.textContent = 'XR NOT SUPPORTED';\n\n\t\t}\n\n\t\tfunction showXRNotAllowed( exception ) {\n\n\t\t\tdisableButton();\n\n\t\t\tconsole.warn( 'Exception when trying to call xr.isSessionSupported', exception );\n\n\t\t\tbutton.textContent = 'XR NOT ALLOWED';\n\n\t\t}\n\n\t\tfunction stylizeElement( element ) {\n\n\t\t\telement.style.position = 'absolute';\n\t\t\telement.style.bottom = '20px';\n\t\t\telement.style.padding = '12px 6px';\n\t\t\telement.style.border = '1px solid #fff';\n\t\t\telement.style.borderRadius = '4px';\n\t\t\telement.style.background = 'rgba(0,0,0,0.1)';\n\t\t\telement.style.color = '#fff';\n\t\t\telement.style.font = 'normal 13px sans-serif';\n\t\t\telement.style.textAlign = 'center';\n\t\t\telement.style.opacity = '0.5';\n\t\t\telement.style.outline = 'none';\n\t\t\telement.style.zIndex = '999';\n\n\t\t}\n\n\t\tif ( 'xr' in navigator ) {\n\n\t\t\tbutton.id = 'XRButton';\n\t\t\tbutton.style.display = 'none';\n\n\t\t\tstylizeElement( button );\n\n\t\t\tnavigator.xr.isSessionSupported( 'immersive-ar' )\n\t\t\t\t.then( function ( supported ) {\n\n\t\t\t\t\tif ( supported ) {\n\n\t\t\t\t\t\tshowStartXR( 'immersive-ar' );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tnavigator.xr.isSessionSupported( 'immersive-vr' )\n\t\t\t\t\t\t\t.then( function ( supported ) {\n\n\t\t\t\t\t\t\t\tif ( supported ) {\n\n\t\t\t\t\t\t\t\t\tshowStartXR( 'immersive-vr' );\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tshowXRNotSupported();\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} ).catch( showXRNotAllowed );\n\n\t\t\t\t\t}\n\n\t\t\t\t} ).catch( showXRNotAllowed );\n\n\t\t\treturn button;\n\n\t\t} else {\n\n\t\t\tconst message = document.createElement( 'a' );\n\n\t\t\tif ( window.isSecureContext === false ) {\n\n\t\t\t\tmessage.href = document.location.href.replace( /^http:/, 'https:' );\n\t\t\t\tmessage.innerHTML = 'WEBXR NEEDS HTTPS'; // TODO Improve message\n\n\t\t\t} else {\n\n\t\t\t\tmessage.href = 'https://immersiveweb.dev/';\n\t\t\t\tmessage.innerHTML = 'WEBXR NOT AVAILABLE';\n\n\t\t\t}\n\n\t\t\tmessage.style.left = 'calc(50% - 90px)';\n\t\t\tmessage.style.width = '180px';\n\t\t\tmessage.style.textDecoration = 'none';\n\n\t\t\tstylizeElement( message );\n\n\t\t\treturn message;\n\n\t\t}\n\n\t}\n\n}\n\nexport { XRButton };\n"],"mappings":"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","ignoreList":[]}