import{BufferGeometry}from"../core/BufferGeometry.js";import{Float32BufferAttribute}from"../core/BufferAttribute.js";import{Vector3}from"../math/Vector3.js";import{Vector2}from"../math/Vector2.js";class CylinderGeometry extends BufferGeometry{constructor(t=1,e=1,r=1,o=32,s=1,n=!1,h=0,u=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:r,radialSegments:o,heightSegments:s,openEnded:n,thetaStart:h,thetaLength:u};const i=this;o=Math.floor(o),s=Math.floor(s);const a=[],p=[],c=[],f=[];let m=0;const l=[],y=r/2;let d=0;function g(r){const s=m,n=new Vector2,l=new Vector3;let g=0;const x=!0===r?t:e,B=!0===r?1:-1;for(let t=1;t<=o;t++)p.push(0,y*B,0),c.push(0,B,0),f.push(.5,.5),m++;const b=m;for(let t=0;t<=o;t++){const e=t/o*u+h,r=Math.cos(e),s=Math.sin(e);l.x=x*s,l.y=y*B,l.z=x*r,p.push(l.x,l.y,l.z),c.push(0,B,0),n.x=.5*r+.5,n.y=.5*s*B+.5,f.push(n.x,n.y),m++}for(let t=0;t<o;t++){const e=s+t,o=b+t;!0===r?a.push(o,o+1,e):a.push(o+1,o,e),g+=3}i.addGroup(d,g,!0===r?1:2),d+=g}!function(){const n=new Vector3,g=new Vector3;let x=0;const B=(e-t)/r;for(let i=0;i<=s;i++){const a=[],d=i/s,x=d*(e-t)+t;for(let t=0;t<=o;t++){const e=t/o,s=e*u+h,i=Math.sin(s),l=Math.cos(s);g.x=x*i,g.y=-d*r+y,g.z=x*l,p.push(g.x,g.y,g.z),n.set(i,B,l).normalize(),c.push(n.x,n.y,n.z),f.push(e,1-d),a.push(m++)}l.push(a)}for(let r=0;r<o;r++)for(let o=0;o<s;o++){const n=l[o][r],h=l[o+1][r],u=l[o+1][r+1],i=l[o][r+1];(t>0||0!==o)&&(a.push(n,h,i),x+=3),(e>0||o!==s-1)&&(a.push(h,u,i),x+=3)}i.addGroup(d,x,0),d+=x}(),!1===n&&(t>0&&g(!0),e>0&&g(!1)),this.setIndex(a),this.setAttribute("position",new Float32BufferAttribute(p,3)),this.setAttribute("normal",new Float32BufferAttribute(c,3)),this.setAttribute("uv",new Float32BufferAttribute(f,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new CylinderGeometry(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}export{CylinderGeometry};
//# sourceMappingURL=CylinderGeometry.js.map