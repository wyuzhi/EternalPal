import{UVMapping}from"../../constants.js";import{Euler}from"../../math/Euler.js";import{Matrix4}from"../../math/Matrix4.js";import Node from"../core/Node.js";import{renderGroup}from"../core/UniformGroupNode.js";import{nodeImmutable,uniform}from"../tsl/TSLBase.js";import{reference}from"./ReferenceNode.js";const _e1=new Euler,_m1=new Matrix4;class SceneNode extends Node{static get type(){return"SceneNode"}constructor(e=SceneNode.BACKGROUND_BLURRINESS,o=null){super(),this.scope=e,this.scene=o}setup(e){const o=this.scope,n=null!==this.scene?this.scene:e.scene;let r;return o===SceneNode.BACKGROUND_BLURRINESS?r=reference("backgroundBlurriness","float",n):o===SceneNode.BACKGROUND_INTENSITY?r=reference("backgroundIntensity","float",n):o===SceneNode.BACKGROUND_ROTATION?r=uniform("mat4").setName("backgroundRotation").setGroup(renderGroup).onRenderUpdate((()=>{const e=n.background;return null!==e&&e.isTexture&&e.mapping!==UVMapping?(_e1.copy(n.backgroundRotation),_e1.x*=-1,_e1.y*=-1,_e1.z*=-1,_m1.makeRotationFromEuler(_e1)):_m1.identity(),_m1})):console.error("THREE.SceneNode: Unknown scope:",o),r}}SceneNode.BACKGROUND_BLURRINESS="backgroundBlurriness",SceneNode.BACKGROUND_INTENSITY="backgroundIntensity",SceneNode.BACKGROUND_ROTATION="backgroundRotation";export default SceneNode;export const backgroundBlurriness=nodeImmutable(SceneNode,SceneNode.BACKGROUND_BLURRINESS);export const backgroundIntensity=nodeImmutable(SceneNode,SceneNode.BACKGROUND_INTENSITY);export const backgroundRotation=nodeImmutable(SceneNode,SceneNode.BACKGROUND_ROTATION);
//# sourceMappingURL=SceneNode.js.map