{"version":3,"file":"node_modules/three/src/nodes/accessors/TangentUtils.js","names":["getUV","positionView","normalView","uv","q0","dFdx","q1","dFdy","st0","st1","N","q1perp","cross","q0perp","T","mul","x","add","B","y","det","dot","max","scale","equal","select","inverseSqrt","tangentViewFrame","toVar","bitangentViewFrame"],"sources":["node_modules/three/src/nodes/accessors/TangentUtils.js"],"sourcesContent":["import { uv as getUV } from './UV.js';\nimport { positionView } from './Position.js';\nimport { normalView } from './Normal.js';\n\n// Normal Mapping Without Precomputed Tangents\n// http://www.thetenthplanet.de/archives/1180\n\nconst uv = getUV();\n\nconst q0 = positionView.dFdx();\nconst q1 = positionView.dFdy();\nconst st0 = uv.dFdx();\nconst st1 = uv.dFdy();\n\nconst N = normalView;\n\nconst q1perp = q1.cross( N );\nconst q0perp = N.cross( q0 );\n\nconst T = q1perp.mul( st0.x ).add( q0perp.mul( st1.x ) );\nconst B = q1perp.mul( st0.y ).add( q0perp.mul( st1.y ) );\n\nconst det = T.dot( T ).max( B.dot( B ) );\nconst scale = det.equal( 0.0 ).select( 0.0, det.inverseSqrt() );\n\n/**\n * Tangent vector in view space, computed dynamically from geometry and UV derivatives.\n * Useful for normal mapping without precomputed tangents.\n *\n * Reference: http://www.thetenthplanet.de/archives/1180\n *\n * @tsl\n * @type {Node<vec3>}\n */\nexport const tangentViewFrame = /*@__PURE__*/ T.mul( scale ).toVar( 'tangentViewFrame' );\n\n/**\n * Bitangent vector in view space, computed dynamically from geometry and UV derivatives.\n * Complements the tangentViewFrame for constructing the tangent space basis.\n *\n * Reference: http://www.thetenthplanet.de/archives/1180\n *\n * @tsl\n * @type {Node<vec3>}\n */\nexport const bitangentViewFrame = /*@__PURE__*/ B.mul( scale ).toVar( 'bitangentViewFrame' );\n"],"mappings":"aAAeA,UAAa,iBACnBC,iBAAoB,uBACpBC,eAAkB,cAK3B,MAAMC,GAAKH,QAELI,GAAKH,aAAaI,OAClBC,GAAKL,aAAaM,OAClBC,IAAML,GAAGE,OACTI,IAAMN,GAAGI,OAETG,EAAIR,WAEJS,OAASL,GAAGM,MAAOF,GACnBG,OAASH,EAAEE,MAAOR,IAElBU,EAAIH,OAAOI,IAAKP,IAAIQ,GAAIC,IAAKJ,OAAOE,IAAKN,IAAIO,IAC7CE,EAAIP,OAAOI,IAAKP,IAAIW,GAAIF,IAAKJ,OAAOE,IAAKN,IAAIU,IAE7CC,IAAMN,EAAEO,IAAKP,GAAIQ,IAAKJ,EAAEG,IAAKH,IAC7BK,MAAQH,IAAII,MAAO,GAAMC,OAAQ,EAAKL,IAAIM,sBAWzC,MAAMC,iBAAiCb,EAAEC,IAAKQ,OAAQK,MAAO,2BAW7D,MAAMC,mBAAmCX,EAAEH,IAAKQ,OAAQK,MAAO","ignoreList":[]}