{"version":3,"file":"node_modules/three/src/nodes/accessors/TextureBicubic.js","names":["add","mul","div","floor","ceil","fract","pow","Fn","vec2","vec4","int","maxMipLevel","bC","w0","a","negate","sub","w1","w2","w3","g0","g1","h0","h1","bicubic","textureNode","texelSize","lod","uv","uvNode","uvScaled","zw","iuv","fuv","g0x","x","g1x","h0x","h1x","h0y","y","h1y","p0","xy","p1","p2","p3","sample","level","b","textureBicubicLevel","lodNode","fLodSize","size","cLodSize","fLodSizeInv","cLodSizeInv","fSample","cSample","mix","textureBicubic","strength"],"sources":["node_modules/three/src/nodes/accessors/TextureBicubic.js"],"sourcesContent":["import { add, mul, div } from '../math/OperatorNode.js';\nimport { floor, ceil, fract, pow } from '../math/MathNode.js';\nimport { Fn, vec2, vec4, int } from '../tsl/TSLBase.js';\nimport { maxMipLevel } from '../utils/MaxMipLevelNode.js';\n\n// Mipped Bicubic Texture Filtering by N8\n// https://www.shadertoy.com/view/Dl2SDW\n\nconst bC = 1.0 / 6.0;\n\nconst w0 = ( a ) => mul( bC, mul( a, mul( a, a.negate().add( 3.0 ) ).sub( 3.0 ) ).add( 1.0 ) );\n\nconst w1 = ( a ) => mul( bC, mul( a, mul( a, mul( 3.0, a ).sub( 6.0 ) ) ).add( 4.0 ) );\n\nconst w2 = ( a ) => mul( bC, mul( a, mul( a, mul( - 3.0, a ).add( 3.0 ) ).add( 3.0 ) ).add( 1.0 ) );\n\nconst w3 = ( a ) => mul( bC, pow( a, 3 ) );\n\nconst g0 = ( a ) => w0( a ).add( w1( a ) );\n\nconst g1 = ( a ) => w2( a ).add( w3( a ) );\n\n// h0 and h1 are the two offset functions\nconst h0 = ( a ) => add( - 1.0, w1( a ).div( w0( a ).add( w1( a ) ) ) );\n\nconst h1 = ( a ) => add( 1.0, w3( a ).div( w2( a ).add( w3( a ) ) ) );\n\nconst bicubic = ( textureNode, texelSize, lod ) => {\n\n\tconst uv = textureNode.uvNode;\n\tconst uvScaled = mul( uv, texelSize.zw ).add( 0.5 );\n\n\tconst iuv = floor( uvScaled );\n\tconst fuv = fract( uvScaled );\n\n\tconst g0x = g0( fuv.x );\n\tconst g1x = g1( fuv.x );\n\tconst h0x = h0( fuv.x );\n\tconst h1x = h1( fuv.x );\n\tconst h0y = h0( fuv.y );\n\tconst h1y = h1( fuv.y );\n\n\tconst p0 = vec2( iuv.x.add( h0x ), iuv.y.add( h0y ) ).sub( 0.5 ).mul( texelSize.xy );\n\tconst p1 = vec2( iuv.x.add( h1x ), iuv.y.add( h0y ) ).sub( 0.5 ).mul( texelSize.xy );\n\tconst p2 = vec2( iuv.x.add( h0x ), iuv.y.add( h1y ) ).sub( 0.5 ).mul( texelSize.xy );\n\tconst p3 = vec2( iuv.x.add( h1x ), iuv.y.add( h1y ) ).sub( 0.5 ).mul( texelSize.xy );\n\n\tconst a = g0( fuv.y ).mul( add( g0x.mul( textureNode.sample( p0 ).level( lod ) ), g1x.mul( textureNode.sample( p1 ).level( lod ) ) ) );\n\tconst b = g1( fuv.y ).mul( add( g0x.mul( textureNode.sample( p2 ).level( lod ) ), g1x.mul( textureNode.sample( p3 ).level( lod ) ) ) );\n\n\treturn a.add( b );\n\n};\n\n/**\n * Applies mipped bicubic texture filtering to the given texture node.\n *\n * @tsl\n * @function\n * @param {TextureNode} textureNode - The texture node that should be filtered.\n * @param {Node<float>} lodNode - Defines the LOD to sample from.\n * @return {Node} The filtered texture sample.\n */\nexport const textureBicubicLevel = /*@__PURE__*/ Fn( ( [ textureNode, lodNode ] ) => {\n\n\tconst fLodSize = vec2( textureNode.size( int( lodNode ) ) );\n\tconst cLodSize = vec2( textureNode.size( int( lodNode.add( 1.0 ) ) ) );\n\tconst fLodSizeInv = div( 1.0, fLodSize );\n\tconst cLodSizeInv = div( 1.0, cLodSize );\n\tconst fSample = bicubic( textureNode, vec4( fLodSizeInv, fLodSize ), floor( lodNode ) );\n\tconst cSample = bicubic( textureNode, vec4( cLodSizeInv, cLodSize ), ceil( lodNode ) );\n\n\treturn fract( lodNode ).mix( fSample, cSample );\n\n} );\n\n/**\n * Applies mipped bicubic texture filtering to the given texture node.\n *\n * @tsl\n * @function\n * @param {TextureNode} textureNode - The texture node that should be filtered.\n * @param {Node<float>} [strength] - Defines the strength of the bicubic filtering.\n * @return {Node} The filtered texture sample.\n */\nexport const textureBicubic = /*@__PURE__*/ Fn( ( [ textureNode, strength ] ) => {\n\n\tconst lod = strength.mul( maxMipLevel( textureNode ) );\n\n\treturn textureBicubicLevel( textureNode, lod );\n\n} );\n"],"mappings":"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","ignoreList":[]}