{"version":3,"file":"node_modules/three/src/nodes/functions/BSDF/BRDF_Sheen.js","names":["normalView","positionViewDirection","sheen","sheenRoughness","Fn","float","D_Charlie","roughness","dotNH","alpha","pow2","invAlpha","div","sin2h","oneMinus","max","add","mul","pow","Math","PI","setLayout","name","type","inputs","V_Neubelt","dotNV","dotNL","sub","BRDF_Sheen","lightDirection","halfDir","normalize","dot","clamp","D","V"],"sources":["node_modules/three/src/nodes/functions/BSDF/BRDF_Sheen.js"],"sourcesContent":["import { normalView } from '../../accessors/Normal.js';\nimport { positionViewDirection } from '../../accessors/Position.js';\nimport { sheen, sheenRoughness } from '../../core/PropertyNode.js';\nimport { Fn, float } from '../../tsl/TSLBase.js';\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs\nconst D_Charlie = /*@__PURE__*/ Fn( ( { roughness, dotNH } ) => {\n\n\tconst alpha = roughness.pow2();\n\n\t// Estevez and Kulla 2017, \"Production Friendly Microfacet Sheen BRDF\"\n\tconst invAlpha = float( 1.0 ).div( alpha );\n\tconst cos2h = dotNH.pow2();\n\tconst sin2h = cos2h.oneMinus().max( 0.0078125 ); // 2^(-14/2), so sin2h^2 > 0 in fp16\n\n\treturn float( 2.0 ).add( invAlpha ).mul( sin2h.pow( invAlpha.mul( 0.5 ) ) ).div( 2.0 * Math.PI );\n\n} ).setLayout( {\n\tname: 'D_Charlie',\n\ttype: 'float',\n\tinputs: [\n\t\t{ name: 'roughness', type: 'float' },\n\t\t{ name: 'dotNH', type: 'float' }\n\t]\n} );\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs\nconst V_Neubelt = /*@__PURE__*/ Fn( ( { dotNV, dotNL } ) => {\n\n\t// Neubelt and Pettineo 2013, \"Crafting a Next-gen Material Pipeline for The Order: 1886\"\n\treturn float( 1.0 ).div( float( 4.0 ).mul( dotNL.add( dotNV ).sub( dotNL.mul( dotNV ) ) ) );\n\n} ).setLayout( {\n\tname: 'V_Neubelt',\n\ttype: 'float',\n\tinputs: [\n\t\t{ name: 'dotNV', type: 'float' },\n\t\t{ name: 'dotNL', type: 'float' }\n\t]\n} );\n\nconst BRDF_Sheen = /*@__PURE__*/ Fn( ( { lightDirection } ) => {\n\n\tconst halfDir = lightDirection.add( positionViewDirection ).normalize();\n\n\tconst dotNL = normalView.dot( lightDirection ).clamp();\n\tconst dotNV = normalView.dot( positionViewDirection ).clamp();\n\tconst dotNH = normalView.dot( halfDir ).clamp();\n\n\tconst D = D_Charlie( { roughness: sheenRoughness, dotNH } );\n\tconst V = V_Neubelt( { dotNV, dotNL } );\n\n\treturn sheen.mul( D ).mul( V );\n\n} );\n\nexport default BRDF_Sheen;\n"],"mappings":"OAASA,eAAkB,mCAClBC,0BAA6B,qCAC7BC,MAAOC,mBAAsB,oCAC7BC,GAAIC,UAAa,uBAG1B,MAAMC,UAA0BF,IAAI,EAAIG,YAAWC,YAElD,MAAMC,EAAQF,EAAUG,OAGlBC,EAAWN,MAAO,GAAMO,IAAKH,GAE7BI,EADQL,EAAME,OACAI,WAAWC,IAAK,UAEpC,OAAOV,MAAO,GAAMW,IAAKL,GAAWM,IAAKJ,EAAMK,IAAKP,EAASM,IAAK,MAAUL,IAAK,EAAMO,KAAKC,GAAI,IAE7FC,UAAW,CACdC,KAAM,YACNC,KAAM,QACNC,OAAQ,CACP,CAAEF,KAAM,YAAaC,KAAM,SAC3B,CAAED,KAAM,QAASC,KAAM,YAKnBE,UAA0BrB,IAAI,EAAIsB,QAAOC,WAGvCtB,MAAO,GAAMO,IAAKP,MAAO,GAAMY,IAAKU,EAAMX,IAAKU,GAAQE,IAAKD,EAAMV,IAAKS,QAE3EL,UAAW,CACdC,KAAM,YACNC,KAAM,QACNC,OAAQ,CACP,CAAEF,KAAM,QAASC,KAAM,SACvB,CAAED,KAAM,QAASC,KAAM,YAInBM,WAA2BzB,IAAI,EAAI0B,qBAExC,MAAMC,EAAUD,EAAed,IAAKf,uBAAwB+B,YAEtDL,EAAQ3B,WAAWiC,IAAKH,GAAiBI,QACzCR,EAAQ1B,WAAWiC,IAAKhC,uBAAwBiC,QAChD1B,EAAQR,WAAWiC,IAAKF,GAAUG,QAElCC,EAAI7B,UAAW,CAAEC,UAAWJ,eAAgBK,UAC5C4B,EAAIX,UAAW,CAAEC,QAAOC,UAE9B,OAAOzB,MAAMe,IAAKkB,GAAIlB,IAAKmB,EAAG,mBAIhBP","ignoreList":[]}