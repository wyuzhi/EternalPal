{"version":3,"file":"node_modules/three/src/nodes/functions/BasicLightingModel.js","names":["LightingModel","diffuseColor","MultiplyOperation","MixOperation","AddOperation","materialSpecularStrength","materialReflectivity","mix","vec4","BasicLightingModel","constructor","super","indirect","context","ambientOcclusion","reflectedLight","irradianceLightMap","indirectDiffuse","assign","addAssign","mulAssign","rgb","finish","builder","material","outgoingLight","envNode","environment","combine","mul","console","warn"],"sources":["node_modules/three/src/nodes/functions/BasicLightingModel.js"],"sourcesContent":["import LightingModel from '../core/LightingModel.js';\nimport { diffuseColor } from '../core/PropertyNode.js';\nimport { MultiplyOperation, MixOperation, AddOperation } from '../../constants.js';\nimport { materialSpecularStrength, materialReflectivity } from '../accessors/MaterialNode.js';\nimport { mix } from '../math/MathNode.js';\nimport { vec4 } from '../tsl/TSLBase.js';\n\n/**\n * Represents the lighting model for unlit materials. The only light contribution\n * is baked indirect lighting modulated with ambient occlusion and the material's\n * diffuse color. Environment mapping is supported. Used in {@link MeshBasicNodeMaterial}.\n *\n * @augments LightingModel\n */\nclass BasicLightingModel extends LightingModel {\n\n\t/**\n\t * Constructs a new basic lighting model.\n\t */\n\tconstructor() {\n\n\t\tsuper();\n\n\t}\n\n\t/**\n\t * Implements the baked indirect lighting with its modulation.\n\t *\n\t * @param {NodeBuilder} builder - The current node builder.\n\t */\n\tindirect( { context } ) {\n\n\t\tconst ambientOcclusion = context.ambientOcclusion;\n\t\tconst reflectedLight = context.reflectedLight;\n\t\tconst irradianceLightMap = context.irradianceLightMap;\n\n\t\treflectedLight.indirectDiffuse.assign( vec4( 0.0 ) );\n\n\t\t// accumulation (baked indirect lighting only)\n\n\t\tif ( irradianceLightMap ) {\n\n\t\t\treflectedLight.indirectDiffuse.addAssign( irradianceLightMap );\n\n\t\t} else {\n\n\t\t\treflectedLight.indirectDiffuse.addAssign( vec4( 1.0, 1.0, 1.0, 0.0 ) );\n\n\t\t}\n\n\t\t// modulation\n\n\t\treflectedLight.indirectDiffuse.mulAssign( ambientOcclusion );\n\n\t\treflectedLight.indirectDiffuse.mulAssign( diffuseColor.rgb );\n\n\t}\n\n\t/**\n\t * Implements the environment mapping.\n\t *\n\t * @param {NodeBuilder} builder - The current node builder.\n\t */\n\tfinish( builder ) {\n\n\t\tconst { material, context } = builder;\n\n\t\tconst outgoingLight = context.outgoingLight;\n\t\tconst envNode = builder.context.environment;\n\n\t\tif ( envNode ) {\n\n\t\t\tswitch ( material.combine ) {\n\n\t\t\t\tcase MultiplyOperation:\n\t\t\t\t\toutgoingLight.rgb.assign( mix( outgoingLight.rgb, outgoingLight.rgb.mul( envNode.rgb ), materialSpecularStrength.mul( materialReflectivity ) ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MixOperation:\n\t\t\t\t\toutgoingLight.rgb.assign( mix( outgoingLight.rgb, envNode.rgb, materialSpecularStrength.mul( materialReflectivity ) ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase AddOperation:\n\t\t\t\t\toutgoingLight.rgb.addAssign( envNode.rgb.mul( materialSpecularStrength.mul( materialReflectivity ) ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.warn( 'THREE.BasicLightingModel: Unsupported .combine value:', material.combine );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nexport default BasicLightingModel;\n"],"mappings":"OAAOA,kBAAmB,kCACjBC,iBAAoB,iCACpBC,kBAAmBC,aAAcC,iBAAoB,4BACrDC,yBAA0BC,yBAA4B,sCACtDC,QAAW,6BACXC,SAAY,oBASrB,MAAMC,2BAA2BT,cAKhC,WAAAU,GAECC,OAED,CAOA,QAAAC,EAAUC,QAAEA,IAEX,MAAMC,EAAmBD,EAAQC,iBAC3BC,EAAiBF,EAAQE,eACzBC,EAAqBH,EAAQG,mBAEnCD,EAAeE,gBAAgBC,OAAQV,KAAM,IAIxCQ,EAEJD,EAAeE,gBAAgBE,UAAWH,GAI1CD,EAAeE,gBAAgBE,UAAWX,KAAM,EAAK,EAAK,EAAK,IAMhEO,EAAeE,gBAAgBG,UAAWN,GAE1CC,EAAeE,gBAAgBG,UAAWnB,aAAaoB,IAExD,CAOA,MAAAC,CAAQC,GAEP,MAAMC,SAAEA,EAAQX,QAAEA,GAAYU,EAExBE,EAAgBZ,EAAQY,cACxBC,EAAUH,EAAQV,QAAQc,YAEhC,GAAKD,EAEJ,OAASF,EAASI,SAEjB,KAAK1B,kBACJuB,EAAcJ,IAAIH,OAAQX,IAAKkB,EAAcJ,IAAKI,EAAcJ,IAAIQ,IAAKH,EAAQL,KAAOhB,yBAAyBwB,IAAKvB,wBACtH,MAED,KAAKH,aACJsB,EAAcJ,IAAIH,OAAQX,IAAKkB,EAAcJ,IAAKK,EAAQL,IAAKhB,yBAAyBwB,IAAKvB,wBAC7F,MAED,KAAKF,aACJqB,EAAcJ,IAAIF,UAAWO,EAAQL,IAAIQ,IAAKxB,yBAAyBwB,IAAKvB,wBAC5E,MAED,QACCwB,QAAQC,KAAM,wDAAyDP,EAASI,SAOpF,iBAIcnB","ignoreList":[]}