import AnalyticLightNode from"./AnalyticLightNode.js";import{normalWorld}from"../accessors/Normal.js";import{uniformArray}from"../accessors/UniformArrayNode.js";import{Vector3}from"../../math/Vector3.js";import getShIrradianceAt from"../functions/material/getShIrradianceAt.js";class LightProbeNode extends AnalyticLightNode{static get type(){return"LightProbeNode"}constructor(t=null){super(t);const r=[];for(let t=0;t<9;t++)r.push(new Vector3);this.lightProbe=uniformArray(r)}update(t){const{light:r}=this;super.update(t);for(let t=0;t<9;t++)this.lightProbe.array[t].copy(r.sh.coefficients[t]).multiplyScalar(r.intensity)}setup(t){const r=getShIrradianceAt(normalWorld,this.lightProbe);t.context.irradiance.addAssign(r)}}export default LightProbeNode;
//# sourceMappingURL=LightProbeNode.js.map