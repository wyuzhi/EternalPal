{"version":3,"file":"node_modules/three/src/nodes/lighting/LightProbeNode.js","names":["AnalyticLightNode","normalWorld","uniformArray","Vector3","getShIrradianceAt","LightProbeNode","type","constructor","light","super","array","i","push","this","lightProbe","update","frame","copy","sh","coefficients","multiplyScalar","intensity","setup","builder","irradiance","context","addAssign"],"sources":["node_modules/three/src/nodes/lighting/LightProbeNode.js"],"sourcesContent":["import AnalyticLightNode from './AnalyticLightNode.js';\nimport { normalWorld } from '../accessors/Normal.js';\nimport { uniformArray } from '../accessors/UniformArrayNode.js';\nimport { Vector3 } from '../../math/Vector3.js';\nimport getShIrradianceAt from '../functions/material/getShIrradianceAt.js';\n\n/**\n * Module for representing light probes as nodes.\n *\n * @augments AnalyticLightNode\n */\nclass LightProbeNode extends AnalyticLightNode {\n\n\tstatic get type() {\n\n\t\treturn 'LightProbeNode';\n\n\t}\n\n\t/**\n\t * Constructs a new light probe node.\n\t *\n\t * @param {?LightProbe} [light=null] - The light probe.\n\t */\n\tconstructor( light = null ) {\n\n\t\tsuper( light );\n\n\t\tconst array = [];\n\n\t\tfor ( let i = 0; i < 9; i ++ ) array.push( new Vector3() );\n\n\t\t/**\n\t\t * Light probe represented as a uniform of spherical harmonics.\n\t\t *\n\t\t * @type {UniformArrayNode}\n\t\t */\n\t\tthis.lightProbe = uniformArray( array );\n\n\t}\n\n\t/**\n\t * Overwritten to updated light probe specific uniforms.\n\t *\n\t * @param {NodeFrame} frame - A reference to the current node frame.\n\t */\n\tupdate( frame ) {\n\n\t\tconst { light } = this;\n\n\t\tsuper.update( frame );\n\n\t\t//\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.lightProbe.array[ i ].copy( light.sh.coefficients[ i ] ).multiplyScalar( light.intensity );\n\n\t\t}\n\n\t}\n\n\tsetup( builder ) {\n\n\t\tconst irradiance = getShIrradianceAt( normalWorld, this.lightProbe );\n\n\t\tbuilder.context.irradiance.addAssign( irradiance );\n\n\t}\n\n}\n\nexport default LightProbeNode;\n"],"mappings":"OAAOA,sBAAuB,gCACrBC,gBAAmB,gCACnBC,iBAAoB,0CACpBC,YAAe,+BACjBC,sBAAuB,6CAO9B,MAAMC,uBAAuBL,kBAE5B,eAAWM,GAEV,MAAO,gBAER,CAOA,WAAAC,CAAaC,EAAQ,MAEpBC,MAAOD,GAEP,MAAME,EAAQ,GAEd,IAAM,IAAIC,EAAI,EAAGA,EAAI,EAAGA,IAAOD,EAAME,KAAM,IAAIT,SAO/CU,KAAKC,WAAaZ,aAAcQ,EAEjC,CAOA,MAAAK,CAAQC,GAEP,MAAMR,MAAEA,GAAUK,KAElBJ,MAAMM,OAAQC,GAId,IAAM,IAAIL,EAAI,EAAGA,EAAI,EAAGA,IAEvBE,KAAKC,WAAWJ,MAAOC,GAAIM,KAAMT,EAAMU,GAAGC,aAAcR,IAAMS,eAAgBZ,EAAMa,UAItF,CAEA,KAAAC,CAAOC,GAEN,MAAMC,EAAapB,kBAAmBH,YAAaY,KAAKC,YAExDS,EAAQE,QAAQD,WAAWE,UAAWF,EAEvC,iBAIcnB","ignoreList":[]}