{"version":3,"file":"node_modules/three/src/nodes/lighting/LightingContextNode.js","names":["ContextNode","nodeProxy","float","vec3","LightingContextNode","type","constructor","lightsNode","lightingModel","backdropNode","backdropAlphaNode","super","this","_value","getContext","reflectedLight","directDiffuse","toVar","directSpecular","indirectDiffuse","indirectSpecular","radiance","irradiance","iblIrradiance","ambientOcclusion","backdrop","backdropAlpha","setup","builder","value","context","lightingContext"],"sources":["node_modules/three/src/nodes/lighting/LightingContextNode.js"],"sourcesContent":["import ContextNode from '../core/ContextNode.js';\nimport { nodeProxy, float, vec3 } from '../tsl/TSLBase.js';\n\n/**\n * `LightingContextNode` represents an extension of the {@link ContextNode} module\n * by adding lighting specific context data. It represents the runtime context of\n * {@link LightsNode}.\n *\n * @augments ContextNode\n */\nclass LightingContextNode extends ContextNode {\n\n\tstatic get type() {\n\n\t\treturn 'LightingContextNode';\n\n\t}\n\n\t/**\n\t * Constructs a new lighting context node.\n\t *\n\t * @param {LightsNode} lightsNode - The lights node.\n\t * @param {?LightingModel} [lightingModel=null] - The current lighting model.\n\t * @param {?Node<vec3>} [backdropNode=null] - A backdrop node.\n\t * @param {?Node<float>} [backdropAlphaNode=null] - A backdrop alpha node.\n\t */\n\tconstructor( lightsNode, lightingModel = null, backdropNode = null, backdropAlphaNode = null ) {\n\n\t\tsuper( lightsNode );\n\n\t\t/**\n\t\t * The current lighting model.\n\t\t *\n\t\t * @type {?LightingModel}\n\t\t * @default null\n\t\t */\n\t\tthis.lightingModel = lightingModel;\n\n\t\t/**\n\t\t * A backdrop node.\n\t\t *\n\t\t * @type {?Node<vec3>}\n\t\t * @default null\n\t\t */\n\t\tthis.backdropNode = backdropNode;\n\n\t\t/**\n\t\t * A backdrop alpha node.\n\t\t *\n\t\t * @type {?Node<float>}\n\t\t * @default null\n\t\t */\n\t\tthis.backdropAlphaNode = backdropAlphaNode;\n\n\t\tthis._value = null;\n\n\t}\n\n\t/**\n\t * Returns a lighting context object.\n\t *\n\t * @return {{\n\t * radiance: Node<vec3>,\n\t * irradiance: Node<vec3>,\n\t * iblIrradiance: Node<vec3>,\n\t * ambientOcclusion: Node<float>,\n\t * reflectedLight: {directDiffuse: Node<vec3>, directSpecular: Node<vec3>, indirectDiffuse: Node<vec3>, indirectSpecular: Node<vec3>},\n\t * backdrop: Node<vec3>,\n\t * backdropAlpha: Node<float>\n\t * }} The lighting context object.\n\t */\n\tgetContext() {\n\n\t\tconst { backdropNode, backdropAlphaNode } = this;\n\n\t\tconst directDiffuse = vec3().toVar( 'directDiffuse' ),\n\t\t\tdirectSpecular = vec3().toVar( 'directSpecular' ),\n\t\t\tindirectDiffuse = vec3().toVar( 'indirectDiffuse' ),\n\t\t\tindirectSpecular = vec3().toVar( 'indirectSpecular' );\n\n\t\tconst reflectedLight = {\n\t\t\tdirectDiffuse,\n\t\t\tdirectSpecular,\n\t\t\tindirectDiffuse,\n\t\t\tindirectSpecular\n\t\t};\n\n\t\tconst context = {\n\t\t\tradiance: vec3().toVar( 'radiance' ),\n\t\t\tirradiance: vec3().toVar( 'irradiance' ),\n\t\t\tiblIrradiance: vec3().toVar( 'iblIrradiance' ),\n\t\t\tambientOcclusion: float( 1 ).toVar( 'ambientOcclusion' ),\n\t\t\treflectedLight,\n\t\t\tbackdrop: backdropNode,\n\t\t\tbackdropAlpha: backdropAlphaNode\n\t\t};\n\n\t\treturn context;\n\n\t}\n\n\tsetup( builder ) {\n\n\t\tthis.value = this._value || ( this._value = this.getContext() );\n\t\tthis.value.lightingModel = this.lightingModel || builder.context.lightingModel;\n\n\t\treturn super.setup( builder );\n\n\t}\n\n}\n\nexport default LightingContextNode;\n\nexport const lightingContext = /*@__PURE__*/ nodeProxy( LightingContextNode );\n"],"mappings":"OAAOA,gBAAiB,gCACfC,UAAWC,MAAOC,SAAY,oBASvC,MAAMC,4BAA4BJ,YAEjC,eAAWK,GAEV,MAAO,qBAER,CAUA,WAAAC,CAAaC,EAAYC,EAAgB,KAAMC,EAAe,KAAMC,EAAoB,MAEvFC,MAAOJ,GAQPK,KAAKJ,cAAgBA,EAQrBI,KAAKH,aAAeA,EAQpBG,KAAKF,kBAAoBA,EAEzBE,KAAKC,OAAS,IAEf,CAeA,UAAAC,GAEC,MAAML,aAAEA,EAAYC,kBAAEA,GAAsBE,KAOtCG,EAAiB,CACtBC,cANqBb,OAAOc,MAAO,iBAOnCC,eANiBf,OAAOc,MAAO,kBAO/BE,gBANkBhB,OAAOc,MAAO,mBAOhCG,iBANmBjB,OAAOc,MAAO,qBAmBlC,MAVgB,CACfI,SAAUlB,OAAOc,MAAO,YACxBK,WAAYnB,OAAOc,MAAO,cAC1BM,cAAepB,OAAOc,MAAO,iBAC7BO,iBAAkBtB,MAAO,GAAIe,MAAO,oBACpCF,iBACAU,SAAUhB,EACViB,cAAehB,EAKjB,CAEA,KAAAiB,CAAOC,GAKN,OAHAhB,KAAKiB,MAAQjB,KAAKC,SAAYD,KAAKC,OAASD,KAAKE,cACjDF,KAAKiB,MAAMrB,cAAgBI,KAAKJ,eAAiBoB,EAAQE,QAAQtB,cAE1DG,MAAMgB,MAAOC,EAErB,iBAIcxB,2BAER,MAAM2B,gBAAgC9B,UAAWG","ignoreList":[]}