import DataMap from"./DataMap.js";import{AttributeType}from"./Constants.js";import{DynamicDrawUsage}from"../../constants.js";class Attributes extends DataMap{constructor(t){super(),this.backend=t}delete(t){const e=super.delete(t);return null!==e&&this.backend.destroyAttribute(t),e}update(t,e){const r=this.get(t);if(void 0===r.version)e===AttributeType.VERTEX?this.backend.createAttribute(t):e===AttributeType.INDEX?this.backend.createIndexAttribute(t):e===AttributeType.STORAGE?this.backend.createStorageAttribute(t):e===AttributeType.INDIRECT&&this.backend.createIndirectStorageAttribute(t),r.version=this._getBufferAttribute(t).version;else{const e=this._getBufferAttribute(t);(r.version<e.version||e.usage===DynamicDrawUsage)&&(this.backend.updateAttribute(t),r.version=e.version)}}_getBufferAttribute(t){return t.isInterleavedBufferAttribute&&(t=t.data),t}}export default Attributes;
//# sourceMappingURL=Attributes.js.map