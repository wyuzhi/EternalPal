import ChainMap from"./ChainMap.js";import RenderContext from"./RenderContext.js";import{Scene}from"../../scenes/Scene.js";import{Camera}from"../../cameras/Camera.js";const _chainKeys=[],_defaultScene=new Scene,_defaultCamera=new Camera;class RenderContexts{constructor(){this.chainMaps={}}get(e,t,n=null){let a;if(_chainKeys[0]=e,_chainKeys[1]=t,null===n)a="default";else{const e=n.texture.format;a=`${n.textures.length}:${e}:${n.samples}:${n.depthBuffer}:${n.stencilBuffer}`}const s=this._getChainMap(a);let r=s.get(_chainKeys);return void 0===r&&(r=new RenderContext,s.set(_chainKeys,r)),_chainKeys.length=0,null!==n&&(r.sampleCount=0===n.samples?1:n.samples),r}getForClear(e=null){return this.get(_defaultScene,_defaultCamera,e)}_getChainMap(e){return this.chainMaps[e]||(this.chainMaps[e]=new ChainMap)}dispose(){this.chainMaps={}}}export default RenderContexts;
//# sourceMappingURL=RenderContexts.js.map