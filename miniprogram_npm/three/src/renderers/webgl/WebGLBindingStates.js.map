{"version":3,"file":"node_modules/three/src/renderers/webgl/WebGLBindingStates.js","names":["IntType","WebGLBindingStates","gl","attributes","maxVertexAttributes","getParameter","MAX_VERTEX_ATTRIBS","bindingStates","defaultState","createBindingState","currentState","forceUpdate","bindVertexArrayObject","vao","bindVertexArray","deleteVertexArrayObject","deleteVertexArray","newAttributes","enabledAttributes","attributeDivisors","i","geometry","program","wireframe","object","index","initAttributes","il","length","enableAttribute","attribute","enableAttributeAndDivisor","meshPerAttribute","enableVertexAttribArray","vertexAttribDivisor","disableUnusedAttributes","disableVertexAttribArray","vertexAttribPointer","size","type","normalized","stride","offset","integer","vertexAttribIPointer","reset","resetDefaultState","setup","material","updateBuffers","state","programMap","id","undefined","stateMap","createVertexArray","getBindingState","cachedAttributes","geometryAttributes","attributesNum","programAttributes","getAttributes","name","location","cachedAttribute","geometryAttribute","instanceMatrix","instanceColor","data","needsUpdate","cache","saveCache","update","ELEMENT_ARRAY_BUFFER","materialDefaultAttributeValues","defaultAttributeValues","programAttribute","itemSize","get","buffer","bytesPerElement","INT","UNSIGNED_INT","gpuType","isInterleavedBufferAttribute","isInstancedInterleavedBuffer","locationSize","isInstancedMesh","_maxInstanceCount","count","bindBuffer","ARRAY_BUFFER","isInstancedBufferAttribute","value","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","setupVertexAttributes","dispose","geometryId","programId","releaseStatesOfGeometry","releaseStatesOfProgram"],"sources":["node_modules/three/src/renderers/webgl/WebGLBindingStates.js"],"sourcesContent":["ï»¿import { IntType } from '../../constants.js';\n\nfunction WebGLBindingStates( gl, attributes ) {\n\n\tconst maxVertexAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\n\tconst bindingStates = {};\n\n\tconst defaultState = createBindingState( null );\n\tlet currentState = defaultState;\n\tlet forceUpdate = false;\n\n\tfunction setup( object, material, program, geometry, index ) {\n\n\t\tlet updateBuffers = false;\n\n\t\tconst state = getBindingState( geometry, program, material );\n\n\t\tif ( currentState !== state ) {\n\n\t\t\tcurrentState = state;\n\t\t\tbindVertexArrayObject( currentState.object );\n\n\t\t}\n\n\t\tupdateBuffers = needsUpdate( object, geometry, program, index );\n\n\t\tif ( updateBuffers ) saveCache( object, geometry, program, index );\n\n\t\tif ( index !== null ) {\n\n\t\t\tattributes.update( index, gl.ELEMENT_ARRAY_BUFFER );\n\n\t\t}\n\n\t\tif ( updateBuffers || forceUpdate ) {\n\n\t\t\tforceUpdate = false;\n\n\t\t\tsetupVertexAttributes( object, material, program, geometry );\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, attributes.get( index ).buffer );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction createVertexArrayObject() {\n\n\t\treturn gl.createVertexArray();\n\n\t}\n\n\tfunction bindVertexArrayObject( vao ) {\n\n\t\treturn gl.bindVertexArray( vao );\n\n\t}\n\n\tfunction deleteVertexArrayObject( vao ) {\n\n\t\treturn gl.deleteVertexArray( vao );\n\n\t}\n\n\tfunction getBindingState( geometry, program, material ) {\n\n\t\tconst wireframe = ( material.wireframe === true );\n\n\t\tlet programMap = bindingStates[ geometry.id ];\n\n\t\tif ( programMap === undefined ) {\n\n\t\t\tprogramMap = {};\n\t\t\tbindingStates[ geometry.id ] = programMap;\n\n\t\t}\n\n\t\tlet stateMap = programMap[ program.id ];\n\n\t\tif ( stateMap === undefined ) {\n\n\t\t\tstateMap = {};\n\t\t\tprogramMap[ program.id ] = stateMap;\n\n\t\t}\n\n\t\tlet state = stateMap[ wireframe ];\n\n\t\tif ( state === undefined ) {\n\n\t\t\tstate = createBindingState( createVertexArrayObject() );\n\t\t\tstateMap[ wireframe ] = state;\n\n\t\t}\n\n\t\treturn state;\n\n\t}\n\n\tfunction createBindingState( vao ) {\n\n\t\tconst newAttributes = [];\n\t\tconst enabledAttributes = [];\n\t\tconst attributeDivisors = [];\n\n\t\tfor ( let i = 0; i < maxVertexAttributes; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\t\t\tenabledAttributes[ i ] = 0;\n\t\t\tattributeDivisors[ i ] = 0;\n\n\t\t}\n\n\t\treturn {\n\n\t\t\t// for backward compatibility on non-VAO support browser\n\t\t\tgeometry: null,\n\t\t\tprogram: null,\n\t\t\twireframe: false,\n\n\t\t\tnewAttributes: newAttributes,\n\t\t\tenabledAttributes: enabledAttributes,\n\t\t\tattributeDivisors: attributeDivisors,\n\t\t\tobject: vao,\n\t\t\tattributes: {},\n\t\t\tindex: null\n\n\t\t};\n\n\t}\n\n\tfunction needsUpdate( object, geometry, program, index ) {\n\n\t\tconst cachedAttributes = currentState.attributes;\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\tlet attributesNum = 0;\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tfor ( const name in programAttributes ) {\n\n\t\t\tconst programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute.location >= 0 ) {\n\n\t\t\t\tconst cachedAttribute = cachedAttributes[ name ];\n\t\t\t\tlet geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute === undefined ) {\n\n\t\t\t\t\tif ( name === 'instanceMatrix' && object.instanceMatrix ) geometryAttribute = object.instanceMatrix;\n\t\t\t\t\tif ( name === 'instanceColor' && object.instanceColor ) geometryAttribute = object.instanceColor;\n\n\t\t\t\t}\n\n\t\t\t\tif ( cachedAttribute === undefined ) return true;\n\n\t\t\t\tif ( cachedAttribute.attribute !== geometryAttribute ) return true;\n\n\t\t\t\tif ( geometryAttribute && cachedAttribute.data !== geometryAttribute.data ) return true;\n\n\t\t\t\tattributesNum ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( currentState.attributesNum !== attributesNum ) return true;\n\n\t\tif ( currentState.index !== index ) return true;\n\n\t\treturn false;\n\n\t}\n\n\tfunction saveCache( object, geometry, program, index ) {\n\n\t\tconst cache = {};\n\t\tconst attributes = geometry.attributes;\n\t\tlet attributesNum = 0;\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tfor ( const name in programAttributes ) {\n\n\t\t\tconst programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute.location >= 0 ) {\n\n\t\t\t\tlet attribute = attributes[ name ];\n\n\t\t\t\tif ( attribute === undefined ) {\n\n\t\t\t\t\tif ( name === 'instanceMatrix' && object.instanceMatrix ) attribute = object.instanceMatrix;\n\t\t\t\t\tif ( name === 'instanceColor' && object.instanceColor ) attribute = object.instanceColor;\n\n\t\t\t\t}\n\n\t\t\t\tconst data = {};\n\t\t\t\tdata.attribute = attribute;\n\n\t\t\t\tif ( attribute && attribute.data ) {\n\n\t\t\t\t\tdata.data = attribute.data;\n\n\t\t\t\t}\n\n\t\t\t\tcache[ name ] = data;\n\n\t\t\t\tattributesNum ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tcurrentState.attributes = cache;\n\t\tcurrentState.attributesNum = attributesNum;\n\n\t\tcurrentState.index = index;\n\n\t}\n\n\tfunction initAttributes() {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\n\t\tfor ( let i = 0, il = newAttributes.length; i < il; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttribute( attribute ) {\n\n\t\tenableAttributeAndDivisor( attribute, 0 );\n\n\t}\n\n\tfunction enableAttributeAndDivisor( attribute, meshPerAttribute ) {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\t\tconst enabledAttributes = currentState.enabledAttributes;\n\t\tconst attributeDivisors = currentState.attributeDivisors;\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\n\n\t\t\tgl.vertexAttribDivisor( attribute, meshPerAttribute );\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\n\n\t\t}\n\n\t}\n\n\tfunction disableUnusedAttributes() {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\t\tconst enabledAttributes = currentState.enabledAttributes;\n\n\t\tfor ( let i = 0, il = enabledAttributes.length; i < il; i ++ ) {\n\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction vertexAttribPointer( index, size, type, normalized, stride, offset, integer ) {\n\n\t\tif ( integer === true ) {\n\n\t\t\tgl.vertexAttribIPointer( index, size, type, stride, offset );\n\n\t\t} else {\n\n\t\t\tgl.vertexAttribPointer( index, size, type, normalized, stride, offset );\n\n\t\t}\n\n\t}\n\n\tfunction setupVertexAttributes( object, material, program, geometry ) {\n\n\t\tinitAttributes();\n\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tconst materialDefaultAttributeValues = material.defaultAttributeValues;\n\n\t\tfor ( const name in programAttributes ) {\n\n\t\t\tconst programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute.location >= 0 ) {\n\n\t\t\t\tlet geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute === undefined ) {\n\n\t\t\t\t\tif ( name === 'instanceMatrix' && object.instanceMatrix ) geometryAttribute = object.instanceMatrix;\n\t\t\t\t\tif ( name === 'instanceColor' && object.instanceColor ) geometryAttribute = object.instanceColor;\n\n\t\t\t\t}\n\n\t\t\t\tif ( geometryAttribute !== undefined ) {\n\n\t\t\t\t\tconst normalized = geometryAttribute.normalized;\n\t\t\t\t\tconst size = geometryAttribute.itemSize;\n\n\t\t\t\t\tconst attribute = attributes.get( geometryAttribute );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tconst buffer = attribute.buffer;\n\t\t\t\t\tconst type = attribute.type;\n\t\t\t\t\tconst bytesPerElement = attribute.bytesPerElement;\n\n\t\t\t\t\t// check for integer attributes\n\n\t\t\t\t\tconst integer = ( type === gl.INT || type === gl.UNSIGNED_INT || geometryAttribute.gpuType === IntType );\n\n\t\t\t\t\tif ( geometryAttribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tconst data = geometryAttribute.data;\n\t\t\t\t\t\tconst stride = data.stride;\n\t\t\t\t\t\tconst offset = geometryAttribute.offset;\n\n\t\t\t\t\t\tif ( data.isInstancedInterleavedBuffer ) {\n\n\t\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute.location + i, data.meshPerAttribute );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( object.isInstancedMesh !== true && geometry._maxInstanceCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = data.meshPerAttribute * data.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\t\tenableAttribute( programAttribute.location + i );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, buffer );\n\n\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\tvertexAttribPointer(\n\t\t\t\t\t\t\t\tprogramAttribute.location + i,\n\t\t\t\t\t\t\t\tsize / programAttribute.locationSize,\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\tnormalized,\n\t\t\t\t\t\t\t\tstride * bytesPerElement,\n\t\t\t\t\t\t\t\t( offset + ( size / programAttribute.locationSize ) * i ) * bytesPerElement,\n\t\t\t\t\t\t\t\tinteger\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( geometryAttribute.isInstancedBufferAttribute ) {\n\n\t\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute.location + i, geometryAttribute.meshPerAttribute );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( object.isInstancedMesh !== true && geometry._maxInstanceCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\t\tenableAttribute( programAttribute.location + i );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, buffer );\n\n\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\tvertexAttribPointer(\n\t\t\t\t\t\t\t\tprogramAttribute.location + i,\n\t\t\t\t\t\t\t\tsize / programAttribute.locationSize,\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\tnormalized,\n\t\t\t\t\t\t\t\tsize * bytesPerElement,\n\t\t\t\t\t\t\t\t( size / programAttribute.locationSize ) * i * bytesPerElement,\n\t\t\t\t\t\t\t\tinteger\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\n\n\t\t\t\t\tconst value = materialDefaultAttributeValues[ name ];\n\n\t\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\t\tswitch ( value.length ) {\n\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\tgl.vertexAttrib2fv( programAttribute.location, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\tgl.vertexAttrib3fv( programAttribute.location, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\tgl.vertexAttrib4fv( programAttribute.location, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tgl.vertexAttrib1fv( programAttribute.location, value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tdisableUnusedAttributes();\n\n\t}\n\n\tfunction dispose() {\n\n\t\treset();\n\n\t\tfor ( const geometryId in bindingStates ) {\n\n\t\t\tconst programMap = bindingStates[ geometryId ];\n\n\t\t\tfor ( const programId in programMap ) {\n\n\t\t\t\tconst stateMap = programMap[ programId ];\n\n\t\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t\t}\n\n\t\t\t\tdelete programMap[ programId ];\n\n\t\t\t}\n\n\t\t\tdelete bindingStates[ geometryId ];\n\n\t\t}\n\n\t}\n\n\tfunction releaseStatesOfGeometry( geometry ) {\n\n\t\tif ( bindingStates[ geometry.id ] === undefined ) return;\n\n\t\tconst programMap = bindingStates[ geometry.id ];\n\n\t\tfor ( const programId in programMap ) {\n\n\t\t\tconst stateMap = programMap[ programId ];\n\n\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t}\n\n\t\t\tdelete programMap[ programId ];\n\n\t\t}\n\n\t\tdelete bindingStates[ geometry.id ];\n\n\t}\n\n\tfunction releaseStatesOfProgram( program ) {\n\n\t\tfor ( const geometryId in bindingStates ) {\n\n\t\t\tconst programMap = bindingStates[ geometryId ];\n\n\t\t\tif ( programMap[ program.id ] === undefined ) continue;\n\n\t\t\tconst stateMap = programMap[ program.id ];\n\n\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t}\n\n\t\t\tdelete programMap[ program.id ];\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\tresetDefaultState();\n\t\tforceUpdate = true;\n\n\t\tif ( currentState === defaultState ) return;\n\n\t\tcurrentState = defaultState;\n\t\tbindVertexArrayObject( currentState.object );\n\n\t}\n\n\t// for backward-compatibility\n\n\tfunction resetDefaultState() {\n\n\t\tdefaultState.geometry = null;\n\t\tdefaultState.program = null;\n\t\tdefaultState.wireframe = false;\n\n\t}\n\n\treturn {\n\n\t\tsetup: setup,\n\t\treset: reset,\n\t\tresetDefaultState: resetDefaultState,\n\t\tdispose: dispose,\n\t\treleaseStatesOfGeometry: releaseStatesOfGeometry,\n\t\treleaseStatesOfProgram: releaseStatesOfProgram,\n\n\t\tinitAttributes: initAttributes,\n\t\tenableAttribute: enableAttribute,\n\t\tdisableUnusedAttributes: disableUnusedAttributes\n\n\t};\n\n}\n\n\nexport { WebGLBindingStates };\n"],"mappings":"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","ignoreList":[]}