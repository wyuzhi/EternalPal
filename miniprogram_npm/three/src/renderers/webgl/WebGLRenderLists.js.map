{"version":3,"file":"node_modules/three/src/renderers/webgl/WebGLRenderLists.js","names":["painterSortStable","a","b","groupOrder","renderOrder","material","id","z","reversePainterSortStable","WebGLRenderList","renderItems","renderItemsIndex","opaque","transmissive","transparent","getNextRenderItem","object","geometry","group","renderItem","undefined","init","length","push","transmission","unshift","finish","i","il","sort","customOpaqueSort","customTransparentSort","WebGLRenderLists","lists","WeakMap","get","scene","renderCallDepth","listArray","list","set","dispose"],"sources":["node_modules/three/src/renderers/webgl/WebGLRenderLists.js"],"sourcesContent":["function painterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.material.id !== b.material.id ) {\n\n\t\treturn a.material.id - b.material.id;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn a.z - b.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\nfunction reversePainterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn b.z - a.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\n\nfunction WebGLRenderList() {\n\n\tconst renderItems = [];\n\tlet renderItemsIndex = 0;\n\n\tconst opaque = [];\n\tconst transmissive = [];\n\tconst transparent = [];\n\n\tfunction init() {\n\n\t\trenderItemsIndex = 0;\n\n\t\topaque.length = 0;\n\t\ttransmissive.length = 0;\n\t\ttransparent.length = 0;\n\n\t}\n\n\tfunction getNextRenderItem( object, geometry, material, groupOrder, z, group ) {\n\n\t\tlet renderItem = renderItems[ renderItemsIndex ];\n\n\t\tif ( renderItem === undefined ) {\n\n\t\t\trenderItem = {\n\t\t\t\tid: object.id,\n\t\t\t\tobject: object,\n\t\t\t\tgeometry: geometry,\n\t\t\t\tmaterial: material,\n\t\t\t\tgroupOrder: groupOrder,\n\t\t\t\trenderOrder: object.renderOrder,\n\t\t\t\tz: z,\n\t\t\t\tgroup: group\n\t\t\t};\n\n\t\t\trenderItems[ renderItemsIndex ] = renderItem;\n\n\t\t} else {\n\n\t\t\trenderItem.id = object.id;\n\t\t\trenderItem.object = object;\n\t\t\trenderItem.geometry = geometry;\n\t\t\trenderItem.material = material;\n\t\t\trenderItem.groupOrder = groupOrder;\n\t\t\trenderItem.renderOrder = object.renderOrder;\n\t\t\trenderItem.z = z;\n\t\t\trenderItem.group = group;\n\n\t\t}\n\n\t\trenderItemsIndex ++;\n\n\t\treturn renderItem;\n\n\t}\n\n\tfunction push( object, geometry, material, groupOrder, z, group ) {\n\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\tif ( material.transmission > 0.0 ) {\n\n\t\t\ttransmissive.push( renderItem );\n\n\t\t} else if ( material.transparent === true ) {\n\n\t\t\ttransparent.push( renderItem );\n\n\t\t} else {\n\n\t\t\topaque.push( renderItem );\n\n\t\t}\n\n\t}\n\n\tfunction unshift( object, geometry, material, groupOrder, z, group ) {\n\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\tif ( material.transmission > 0.0 ) {\n\n\t\t\ttransmissive.unshift( renderItem );\n\n\t\t} else if ( material.transparent === true ) {\n\n\t\t\ttransparent.unshift( renderItem );\n\n\t\t} else {\n\n\t\t\topaque.unshift( renderItem );\n\n\t\t}\n\n\t}\n\n\tfunction sort( customOpaqueSort, customTransparentSort ) {\n\n\t\tif ( opaque.length > 1 ) opaque.sort( customOpaqueSort || painterSortStable );\n\t\tif ( transmissive.length > 1 ) transmissive.sort( customTransparentSort || reversePainterSortStable );\n\t\tif ( transparent.length > 1 ) transparent.sort( customTransparentSort || reversePainterSortStable );\n\n\t}\n\n\tfunction finish() {\n\n\t\t// Clear references from inactive renderItems in the list\n\n\t\tfor ( let i = renderItemsIndex, il = renderItems.length; i < il; i ++ ) {\n\n\t\t\tconst renderItem = renderItems[ i ];\n\n\t\t\tif ( renderItem.id === null ) break;\n\n\t\t\trenderItem.id = null;\n\t\t\trenderItem.object = null;\n\t\t\trenderItem.geometry = null;\n\t\t\trenderItem.material = null;\n\t\t\trenderItem.group = null;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\topaque: opaque,\n\t\ttransmissive: transmissive,\n\t\ttransparent: transparent,\n\n\t\tinit: init,\n\t\tpush: push,\n\t\tunshift: unshift,\n\t\tfinish: finish,\n\n\t\tsort: sort\n\t};\n\n}\n\nfunction WebGLRenderLists() {\n\n\tlet lists = new WeakMap();\n\n\tfunction get( scene, renderCallDepth ) {\n\n\t\tconst listArray = lists.get( scene );\n\t\tlet list;\n\n\t\tif ( listArray === undefined ) {\n\n\t\t\tlist = new WebGLRenderList();\n\t\t\tlists.set( scene, [ list ] );\n\n\t\t} else {\n\n\t\t\tif ( renderCallDepth >= listArray.length ) {\n\n\t\t\t\tlist = new WebGLRenderList();\n\t\t\t\tlistArray.push( list );\n\n\t\t\t} else {\n\n\t\t\t\tlist = listArray[ renderCallDepth ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn list;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tlists = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n\nexport { WebGLRenderLists, WebGLRenderList };\n"],"mappings":"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","ignoreList":[]}