{"version":3,"file":"node_modules/three/src/renderers/webgl/WebGLRenderStates.js","names":["WebGLLights","WebGLRenderState","extensions","lights","lightsArray","shadowsArray","state","camera","transmissionRenderTarget","init","length","setupLights","setup","setupLightsView","setupView","pushLight","light","push","pushShadow","shadowLight","WebGLRenderStates","renderStates","WeakMap","get","scene","renderCallDepth","renderStateArray","renderState","undefined","set","dispose"],"sources":["node_modules/three/src/renderers/webgl/WebGLRenderStates.js"],"sourcesContent":["import { WebGLLights } from './WebGLLights.js';\n\nfunction WebGLRenderState( extensions ) {\n\n\tconst lights = new WebGLLights( extensions );\n\n\tconst lightsArray = [];\n\tconst shadowsArray = [];\n\n\tfunction init( camera ) {\n\n\t\tstate.camera = camera;\n\n\t\tlightsArray.length = 0;\n\t\tshadowsArray.length = 0;\n\n\t}\n\n\tfunction pushLight( light ) {\n\n\t\tlightsArray.push( light );\n\n\t}\n\n\tfunction pushShadow( shadowLight ) {\n\n\t\tshadowsArray.push( shadowLight );\n\n\t}\n\n\tfunction setupLights() {\n\n\t\tlights.setup( lightsArray );\n\n\t}\n\n\tfunction setupLightsView( camera ) {\n\n\t\tlights.setupView( lightsArray, camera );\n\n\t}\n\n\tconst state = {\n\t\tlightsArray: lightsArray,\n\t\tshadowsArray: shadowsArray,\n\n\t\tcamera: null,\n\n\t\tlights: lights,\n\n\t\ttransmissionRenderTarget: {}\n\t};\n\n\treturn {\n\t\tinit: init,\n\t\tstate: state,\n\t\tsetupLights: setupLights,\n\t\tsetupLightsView: setupLightsView,\n\n\t\tpushLight: pushLight,\n\t\tpushShadow: pushShadow\n\t};\n\n}\n\nfunction WebGLRenderStates( extensions ) {\n\n\tlet renderStates = new WeakMap();\n\n\tfunction get( scene, renderCallDepth = 0 ) {\n\n\t\tconst renderStateArray = renderStates.get( scene );\n\t\tlet renderState;\n\n\t\tif ( renderStateArray === undefined ) {\n\n\t\t\trenderState = new WebGLRenderState( extensions );\n\t\t\trenderStates.set( scene, [ renderState ] );\n\n\t\t} else {\n\n\t\t\tif ( renderCallDepth >= renderStateArray.length ) {\n\n\t\t\t\trenderState = new WebGLRenderState( extensions );\n\t\t\t\trenderStateArray.push( renderState );\n\n\t\t\t} else {\n\n\t\t\t\trenderState = renderStateArray[ renderCallDepth ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn renderState;\n\n\t}\n\n\tfunction dispose() {\n\n\t\trenderStates = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n\nexport { WebGLRenderStates };\n"],"mappings":"OAASA,gBAAmB,mBAE5B,SAASC,iBAAkBC,GAE1B,MAAMC,EAAS,IAAIH,YAAaE,GAE1BE,EAAc,GACdC,EAAe,GAmCrB,MAAMC,EAAQ,CACbF,YAAaA,EACbC,aAAcA,EAEdE,OAAQ,KAERJ,OAAQA,EAERK,yBAA0B,CAAC,GAG5B,MAAO,CACNC,KA7CD,SAAeF,GAEdD,EAAMC,OAASA,EAEfH,EAAYM,OAAS,EACrBL,EAAaK,OAAS,CAEvB,EAuCCJ,MAAOA,EACPK,YA1BD,WAECR,EAAOS,MAAOR,EAEf,EAuBCS,gBArBD,SAA0BN,GAEzBJ,EAAOW,UAAWV,EAAaG,EAEhC,EAmBCQ,UAzCD,SAAoBC,GAEnBZ,EAAYa,KAAMD,EAEnB,EAsCCE,WApCD,SAAqBC,GAEpBd,EAAaY,KAAME,EAEpB,EAmCD,CAEA,SAASC,kBAAmBlB,GAE3B,IAAImB,EAAe,IAAIC,QAqCvB,MAAO,CACNC,IApCD,SAAcC,EAAOC,EAAkB,GAEtC,MAAMC,EAAmBL,EAAaE,IAAKC,GAC3C,IAAIG,EAsBJ,YApB0BC,IAArBF,GAEJC,EAAc,IAAI1B,iBAAkBC,GACpCmB,EAAaQ,IAAKL,EAAO,CAAEG,KAItBF,GAAmBC,EAAiBhB,QAExCiB,EAAc,IAAI1B,iBAAkBC,GACpCwB,EAAiBT,KAAMU,IAIvBA,EAAcD,EAAkBD,GAM3BE,CAER,EAUCG,QARD,WAECT,EAAe,IAAIC,OAEpB,EAOD,QAGSF","ignoreList":[]}