<view class="system-pet-container">
  <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
  <view class="header">
    <view class="back-btn" bindtap="onBackTap">
      <text class="back-icon">â€¹</text>
    </view>
    <view class="title">é€‰æ‹©å® ç‰©</view>
    <view class="placeholder"></view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-container" tt:if="{{loading}}">
    <view class="loading-text">æ­£åœ¨åŠ è½½å® ç‰©...</view>
  </view>

  <!-- å® ç‰©åˆ—è¡¨ -->
  <view class="pets-container" tt:if="{{!loading}}">
    <view class="pets-grid">
      <view 
        class="pet-card" 
        tt:for="{{systemPets}}" 
        tt:key="id"
        data-pet-id="{{item.id}}"
        bindtap="onPetCardTap"
      >
        <!-- å® ç‰©é¢„è§ˆå›¾ -->
        <view class="pet-image-container">
          <image 
            class="pet-image" 
            src="{{item.preview_url || '/static/images/default-pet.png'}}" 
            mode="aspectFill"
            lazy-load="true"
          />
          <view class="pet-status" tt:if="{{item.user_id}}">
            <text class="status-text">å·²è¢«é¢†å…»</text>
          </view>
        </view>
        
        <!-- å® ç‰©ä¿¡æ¯ -->
        <view class="pet-info">
          <view class="pet-name">{{item.name || 'ç¥ç§˜å® ç‰©'}}</view>
          <view class="pet-details">
            <view class="detail-item" tt:if="{{item.personality}}">
              <text class="detail-label">æ€§æ ¼ï¼š</text>
              <text class="detail-value">{{item.personality}}</text>
            </view>
            <view class="detail-item" tt:if="{{item.hobbies}}">
              <text class="detail-label">çˆ±å¥½ï¼š</text>
              <text class="detail-value">{{item.hobbies}}</text>
            </view>
            <view class="detail-item" tt:if="{{item.breed}}">
              <text class="detail-label">å“ç§ï¼š</text>
              <text class="detail-value">{{item.breed}}</text>
            </view>
          </view>
        </view>
        
        <!-- é€‰æ‹©æŒ‰é’® -->
        <view class="select-btn" tt:if="{{!item.user_id}}">
          <text class="select-text">é€‰æ‹©æˆ‘</text>
        </view>
      </view>
    </view>
    
    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" tt:if="{{systemPets.length === 0}}">
      <view class="empty-icon">ğŸ¾</view>
      <view class="empty-text">æš‚æ— å¯é¢†å…»çš„å® ç‰©</view>
      <view class="empty-desc">è¯·ç¨åå†æ¥çœ‹çœ‹å§</view>
    </view>
  </view>

  <!-- é¢†å…»ç¡®è®¤å¼¹çª— -->
  <view class="modal-overlay" tt:if="{{showAdoptModal}}" bindtap="closeAdoptModal">
    <view class="modal-content" catchtap="">
      <view class="modal-header">
        <text class="modal-title">ç¡®è®¤é¢†å…»</text>
        <view class="modal-close" bindtap="closeAdoptModal">
          <text class="close-icon">Ã—</text>
        </view>
      </view>
      
      <view class="modal-body">
        <view class="adopt-pet-info">
          <image 
            class="adopt-pet-image" 
            src="{{selectedPet.preview_url || '/static/images/default-pet.png'}}" 
            mode="aspectFill"
          />
          <view class="adopt-pet-details">
            <view class="adopt-pet-name">{{selectedPet.name || 'ç¥ç§˜å® ç‰©'}}</view>
            <view class="adopt-pet-traits">
              <text tt:if="{{selectedPet.personality}}">æ€§æ ¼ï¼š{{selectedPet.personality}}</text>
              <text tt:if="{{selectedPet.hobbies}}">çˆ±å¥½ï¼š{{selectedPet.hobbies}}</text>
            </view>
          </view>
        </view>
        
        <view class="adopt-message">
          <text class="message-text">ä½ ç¡®å®šè¦é¢†å…»è¿™åªå¯çˆ±çš„å® ç‰©å—ï¼Ÿ</text>
          <text class="message-desc">é¢†å…»åå®ƒå°†æˆä¸ºä½ çš„ä¸“å±ä¼™ä¼´ï¼</text>
        </view>
      </view>
      
      <view class="modal-footer">
        <view class="modal-btn cancel-btn" bindtap="closeAdoptModal">
          <text class="btn-text">å–æ¶ˆ</text>
        </view>
        <view class="modal-btn confirm-btn" bindtap="confirmAdopt">
          <text class="btn-text">ç¡®è®¤é¢†å…»</text>
        </view>
      </view>
    </view>
  </view>
</view>