<view class="system-pet-container">
  <!-- 顶部导航栏 -->
  <view class="header">
    <view class="back-btn" bindtap="onBackTap">
      <text class="back-icon">‹</text>
    </view>
    <view class="title">选择宠物</view>
    <view class="placeholder"></view>
  </view>

  <!-- 加载状态 -->
  <view class="loading-container" tt:if="{{loading}}">
    <view class="loading-text">正在加载宠物...</view>
  </view>

  <!-- 宠物列表 -->
  <view class="pets-container" tt:if="{{!loading}}">
    <view class="pets-grid">
      <view 
        class="pet-card" 
        tt:for="{{systemPets}}" 
        tt:key="id"
        data-pet-id="{{item.id}}"
        bindtap="onPetCardTap"
      >
        <!-- 宠物预览图 -->
        <view class="pet-image-container">
          <image 
            class="pet-image" 
            src="{{item.preview_url || '/static/images/default-pet.png'}}" 
            mode="aspectFill"
            lazy-load="true"
          />
          <view class="pet-status" tt:if="{{item.user_id}}">
            <text class="status-text">已被领养</text>
          </view>
        </view>
        
        <!-- 宠物信息 -->
        <view class="pet-info">
          <view class="pet-name">{{item.name || '神秘宠物'}}</view>
          <view class="pet-details">
            <view class="detail-item" tt:if="{{item.personality}}">
              <text class="detail-label">性格：</text>
              <text class="detail-value">{{item.personality}}</text>
            </view>
            <view class="detail-item" tt:if="{{item.hobbies}}">
              <text class="detail-label">爱好：</text>
              <text class="detail-value">{{item.hobbies}}</text>
            </view>
            <view class="detail-item" tt:if="{{item.breed}}">
              <text class="detail-label">品种：</text>
              <text class="detail-value">{{item.breed}}</text>
            </view>
          </view>
        </view>
        
        <!-- 选择按钮 -->
        <view class="select-btn" tt:if="{{!item.user_id}}">
          <text class="select-text">选择我</text>
        </view>
      </view>
    </view>
    
    <!-- 空状态 -->
    <view class="empty-state" tt:if="{{systemPets.length === 0}}">
      <view class="empty-icon">🐾</view>
      <view class="empty-text">暂无可领养的宠物</view>
      <view class="empty-desc">请稍后再来看看吧</view>
    </view>
  </view>

  <!-- 领养确认弹窗 -->
  <view class="modal-overlay" tt:if="{{showAdoptModal}}" bindtap="closeAdoptModal">
    <view class="modal-content" catchtap="">
      <view class="modal-header">
        <text class="modal-title">确认领养</text>
        <view class="modal-close" bindtap="closeAdoptModal">
          <text class="close-icon">×</text>
        </view>
      </view>
      
      <view class="modal-body">
        <view class="adopt-pet-info">
          <image 
            class="adopt-pet-image" 
            src="{{selectedPet.preview_url || '/static/images/default-pet.png'}}" 
            mode="aspectFill"
          />
          <view class="adopt-pet-details">
            <view class="adopt-pet-name">{{selectedPet.name || '神秘宠物'}}</view>
            <view class="adopt-pet-traits">
              <text tt:if="{{selectedPet.personality}}">性格：{{selectedPet.personality}}</text>
              <text tt:if="{{selectedPet.hobbies}}">爱好：{{selectedPet.hobbies}}</text>
            </view>
          </view>
        </view>
        
        <view class="adopt-message">
          <text class="message-text">你确定要领养这只可爱的宠物吗？</text>
          <text class="message-desc">领养后它将成为你的专属伙伴！</text>
        </view>
      </view>
      
      <view class="modal-footer">
        <view class="modal-btn cancel-btn" bindtap="closeAdoptModal">
          <text class="btn-text">取消</text>
        </view>
        <view class="modal-btn confirm-btn" bindtap="confirmAdopt">
          <text class="btn-text">确认领养</text>
        </view>
      </view>
    </view>
  </view>
</view>